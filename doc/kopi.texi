\input texinfo

@setfilename kopi
@settitle Kopi Reference manual
@headings single
@ifinfo
Copyright @copyright{}
@end ifinfo

@titlepage
@title The Kopi documentation
@subtitle v 0.6, 8 Dec 1999
@c @subtitle Second draft for review.
@c @subtitle v 0.5, 25 Oct 1999
@c @subtitle First draft for review.
@author Vincent GAY-PARA
@page


@c ************************************************************
@c
@c                      Legal Notice
@c
@c ************************************************************

@node LegalNotice, Preface, , (Top)
Legal Notice

@sp1
Permission is granted to make and distribute verbatim copies of this
manual provided the copyright notice and this permission notice are
preserved on all copies.

@sp1
Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided also that the
sections entitled "GNU General Public License", and "GNU Lesser General
Public License" are included exactly as in the original, and provided
that the entire resulting derived work is distributed under the terms of
a permission notice identical to this one.

@sp1
Permission is granted to copy and distribute translations of this
manual into another language, under the above conditions for modified
versions, except that the sections entitled "GNU General Public
License", and "GNU Lesser General Public License", and this permission
notice, may be included in translations approved by the Free Software
Foundation instead of in the original English.


@vskip 0pt plus 1filll
Copyright @copyright{} 2001 Decision Management Systems G.m.b.H
@end titlepage


@macro rh{rulename}@c
@i{\rulename\:}@anchor{\rulename\} @c
@end macro

@iftex
@macro rc {rulename} @c
@i{@uref{#\rulename\,\rulename\,\rulename\}}@c 
@end macro
@macro rcopt {rulename} @c
@i{[@uref{#\rulename\,\rulename\,\rulename\}]}@c 
@end macro
@end iftex

@ifinfo
@macro rc {rulename} @c
@i{@uref{#\rulename\,\rulename\,\rulename\}}@c 
@end macro

@macro rcopt {rulename} @c
@i{[@uref{#\rulename\,\rulename\,\rulename\}]}@c 
@end macro
@end ifinfo

@ifhtml
@macro rc {rulename} @c
@i{@uref{#\rulename\,\rulename\,\rulename\}} 
@end macro
@macro rcopt {rulename} @c
@i{[@uref{#\rulename\,\rulename\,\rulename\}]}
@end macro
@macro sp1 {} @c
@end macro
@macro sp2 {} @c
@end macro
@end ifhtml

@contents


@c ************************************************************
@c
@c                      Preface
@c
@c ************************************************************

@c PREFACE
@node Preface, Chapter 1, , (Top)
@unnumbered Preface


@sp1 
The Kopi Project is a Java software project from DMS which provides
a framework for developing database applications using Java, JDBC and
SWING.

@sp1 
Kopi contains a set of tools which allow you to edit and generate
classfiles: dis (Java disassembler), @acronym{KSM} (Java assembler) and
@acronym{KJC}. @acronym{KJC} compiles Java source code to bytecode, with
all the same plus even more features as commercial
compilers. @acronym{KJC} is available for free under the terms of the
GNU Public License.

@sp1 
The Kopi Project also includes @acronym{XKJC}, a compiler for embedded
@acronym{SQL} in Java. Built over JDBC, it allows the execution of
Java-typed @acronym{SQL} statements and the mixing of expressions from
both @acronym{SQL} and Java.

@sp1 
The last tool provided by DMS is Visual Kopi. Visual Kopi is an
application framework using JDBC and JFC/Swing which lets you create
database applications in a high level specification language. It also
provides the ability to write triggers and commands in Java with
seamlessly embedded SQL statements.


@c PREFACE : section Organization of This Document
@node Organization of This Document, Contributors, , (Preface)
@section Organization of This Document

@sp1
This documentation is divided into chapters independant of each
other:
@quotation
@table @samp
@c <TERM><XREF LINKEND="CH-CLASSFILE">
@item CHAPTER 1
The Kopi Classfile: @acronym{Kopi} classfile is an extensible package
written completely in Java that allows you to read, edit and write
classfiles. It is used by @acronym{KJC} (Java compiler), @acronym{KSM}
(Java assembler) and @acronym{DIS} (Java disassembler).

@c <TERM><XREF LINKEND="CH-KJC">
@item CHAPTER 2
@sp1 
@acronym{KJC} - The @acronym{Kopi} Java Compiler: @acronym{KJC} is the first compiler written completly in Java, available under
the terms of the GNU General Public License. It allows you to extend
features at any level, from syntax to code generation.

@c <TERM><XREF LINKEND="CH-XKJC">
@item CHAPTER 3
@sp1 
@acronym{XKJC} - The @acronym{Kopi} EXtended Java
Compiler: @acronym{XKJC} is a compiler for embedded @acronym{SQL} in
Java. This language is a super set of Java; i.e., it is compatible with
Java source code. This allows the execution of Java-typed @acronym{SQL}
statements and the mixing of expressions from both @acronym{SQL} and
Java.

@c <TERM><XREF LINKEND="CH-VLIB">
@item CHAPTER 4
@sp1 
@acronym{VLIB} - The Visual @acronym{Kopi}: @acronym{VLIB} is an application framework using SWING which lets you create
database applications in a high level specification language.
@end table	  
@end quotation

@c PREFACE : section Contributors
@node Contributors, Credits, Organization of This Document, (Preface)
@section Contributors

@sp1 
The actual Kopi Team:
@itemize @bullet
@item
Vincent GAY-PARA (Main developer)	
@item
Thomas GRAF (Project manager)
@item
Andre-Guillaume LEMONNIER
@item
Erhard WAIS (Web administrator)	
@end itemize
    
@sp1 
In addition of these persons, several people have written parts of Kopi:
@itemize @bullet
@item
Corinne LABORDE (data dictionary)	
@item
Emmanuel LANGUILLAT (kopi report, jdbc driver)
@item
Edouard G. PARMELAN (bug reports and extensions for kjc)
@item
Gerald PALMERO (jdbc driver, GUI draft)
@item
Olivier RAOUX (sql parser, GUI draft)
@end itemize
    
@sp1 
Others contributors (bug reports, suggestions) are:
@itemize @bullet
@item
Kirk ABBOTT
@item
Archie COBBS
@item
Walter DIVOKY
@item
Peter MEHLITZ	
@end itemize
    
@sp1 
A special thanks to Rebecca KELLEY for her assistance in the preparation of this document.
    
@c PREFACE : section Contributors
@node Credits, ,Contributors, (Preface)
@section Credits

@itemize @bullet
@item ANTLR 2.6.0
@sp1 
All grammar of KJC tools are specified in ANTLR language.
ANTLR, ANother Tool for Language Recognition, (formerly PCCTS) is a
parser and translator generator tool, akin to the venerable lex/yacc
duo, that lets you construct recognizers, compilers, and
source-to-source translators from grammatical descriptions containing
C++ or Java actions. You can build translators for database formats,
graphical data files (e.g., PostScript, AutoCAD), text processing files
(e.g., HTML, SGML), etc.... ANTLR is designed to handle all of your
translation tasks. ANTLR is recommended by the co-inventor of LL(k)
parsers and by the inventor of SLR(k) and LALR(k).
	
@sp1 
Home page:@uref{http://www.antlr.org, http://www.antlr.org}.
@sp1 
	
@item GNU GetOpt
@sp1 
The GNU Java getopt classes support short and long argument parsing
in a manner 100% compatible with the version of GNU getopt in glibc
2.0.6 with a mostly compatible programmer's interface as well. Note that
this is a port, not a new implementation. I am currently unaware of any
bugs in this software, but there certainly could be some lying about. I
would appreciate bug reports as well as hearing about positive
experiences.
	
@sp1 
Home page:@uref{http://www.urbanophile.com/arenn/hacking/download.html, http://www.urbanophile.com/arenn/hacking/download.html}.
@sp1 
	
@item MAUVE
@sp1 
Mauve is a project to create a free Java test suite. This
package will both serve as a library regression test suite and test
conformance to various Java specification levels.
	
@sp1 
Home page:@uref{http://sourceware.cygnus.com/mauve/, http://sourceware.cygnus.com/mauve/}.	  
@sp1 
	
@end itemize



@c ************************************************************
@c
@c                      Chapter 1
@c
@c ************************************************************

@c CHAPTER 1
@node Chapter 1, Chapter 2, Preface, (Top)
@chapter Classfile Handling

@sp1
@acronym{Kopi} classfile is an extensible package written
completely in Java that allows you to read, edit and write
classfiles. It is used by @acronym{KJC} (Java compiler), @acronym{KSM}
(Java assembler) and @acronym{DIS} (Java disassembler).  

@sp1 
This list shows typical tools that may be built with Kopi Classfile:

@itemize @bullet
@item
Backend for compilers that generate code for the Java Virtual Machine;
      @item
Java assembler;
      @item
Optimizer for classfiles (obfuscators, code optimizers, ...);
      @item
Bytecode level tools (instrumenters, profilers);
      @item
Disassembler and decompiler;
      @item
Native recompilers to C.
@end itemize

@sp1
    This package allows you to edit classfiles and to
    check and optimize instructions in an elegant way. Generated code
    from ``normal input'' is in the same order of size and speed as
    thus generated by other commercial compilers such as Javac or
    jikes. Applied optimisation is mainly peephole optimisation and
    has also faster bytecode replacement and switch selection
    capabilities. And last
    but not least, this package is able to compute the stack's depth
    and the number of local variables used by each method.

@sp1
    There are two main sections in this chapter:

@quotation
@table @samp
@item The description of the tools in Kopi Assembly Language (@xref{Kopi Assembly Language}.)
An assembly language for the Java classfile format.
Two tools are available:
@quotation
@table @samp
@item The documentation for the disassembler in The Kopi Disassembler (@acronym{DIS}) (@xref{The Kopi Disassembler}.)
A Java disassembler that allows one to read and edit a
classfile in kopi-assembler.
@item The documentation for the assembler in The Kopi Assembler (@acronym{KSM}) (@xref{The Kopi Assembler}.)
A Java assembler used to write classfile from kopi-assembler.
@end table
@end quotation

@item The description of the API in Kopi Classfile API (@xref{Kopi Classfile API}.)
The package classfile itself, that allows one to handle Java code
generation from within an other Java application without worrying about
code optimization, stackand local variable handling, code checking and
constant pool optimization.
@quotation
@table @samp
@item The core API in Read a classfile (@xref{Read a classfile}.)
An API for embedding Java code generation in other tools.
@item The performed optimizations in Pluggable Bytecode optimizer (@xref{Pluggable Bytecode optimizer}.)
An in depth report about performed optimizations.

@end table
@end quotation

@end table
@end quotation

@c  CHAPTER 1 : section Kopi Assembly Language
@node Kopi Assembly Language, Kopi Classfile API, , (Chapter 1)
@section Kopi Assembly Language

@sp1
The syntax was designed to be both readable and fully functional
(It keep a total power of expression). The primary goal was to let the
assembler (the classfile API) do as much work as possible, making for
example unnecessary to specify the maximum amount of stack used or the
number of local variables, since this information can be deduced from
the program to assemble. The instructions opcodes are limited to the
strict minimum, and all the instructions defined to optimize a program
(such as load_1) will be replaced by the assembler from generics
instructions (from load 1).

@c  CHAPTER 1 : section Kopi Assembly Language : subsection File structure
@node File structure, The Kopi Assembler, , (Kopi Assembly Language)
@subsection File structure
@sp1
The file structure is similar to a Java compilation unit.  The syntax
looks like a normal Java program for the member's definition. Only the
method body is described in assembler. Some special information found in
classfiles such as LineNumberTable, LocalVariableTable and attributes
are also defined in the method body, but all of this information is
optional.
@sp1
The code of methods is pure Java assembler as defined at
@uref{http://java.sun.com/docs/books/vmspec/2nd-edition/html/Instructions.doc.html,
http://java.sun.com/docs/books/vmspec/2nd-edition/html/Instructions.doc.html}.
@sp1
The easiest way to understand Kopi assembler is to look at an
example or to decompile your own classes with @acronym{DIS}.

@sp1
@b{Example}
@example
// compiler version: 45.3

@@source "HelloWorldApp.java"
class HelloWorldApp extends java.lang.Object @{

    /**
     * main
     *
     * @@stack   2
     * @@locals  1
     */
    public static void main(java.lang.String[]) @{
        @@line   3
                @@getstatic      java.io.PrintStream java.lang.System.out
                @@const          "Hello World!"
                @@invokevirtual  void java.io.PrintStream.println(java.lang.String)
        @@line   2
                @@return
    @}

    /**
     * init
     *
     * @@stack   1
     * @@locals  1
     */
    void init() @{
        @@line   1
                @@aload          0
                @@invokespecial  void java.lang.Object.init()
                @@return
    @}
@}
@end example

@c  CHAPTER 1 : section Kopi Assembly Language : subsection The Kopi Assembler KSM
@node The Kopi Assembler, The Kopi Disassembler, File structure, (Kopi Assembly Language)
@subsection The Kopi Assembler (@acronym{KSM})
@footnote {License type : KSM is distributed under the terms of the GNU General Public License. (@xref{Appendix 2}.)}

@sp1
To launch @acronym{KSM} from the command line, type 
@sp1
@quotation
@smallformat
java at.dms.ksm.Main
@end smallformat
@end quotation
@sp1
The command line parameters are: 
@quotation
@smallformat
java at.dms.ksm.Main [dhV] file.ksm+
  usage: at.dms.ksm.Main [option]* [--help] files.ksm
  --destination, d _: Sets the destination directory
  --help, h: displays the help information
  --verbose, v: Displays information while processing files [false]
  --version, V: prints out the version information
    file: the files to assemble
@end smallformat
@end quotation
    
@c  CHAPTER 1 : section Kopi Assembly Language : subsection The Kopi Disassembler DIS
@node The Kopi Disassembler, , The Kopi Assembler, (Kopi Assembly Language)
@subsection The Kopi Disassembler (@acronym{DIS})
@footnote {License type : DIS is distributed under the terms of the GNU PUBLIC License. (@xref{Appendix 2}.)}

@sp1
This tool allows you to see the code actually generated by your
compiler and may help you to optimize or understand a portion of the
code. This tool may also help you modify some classes from their
bytecode in conjunction with @acronym{KSM}(to regenerate them).

@sp1
To launch @acronym{KSM} from the command line, type:

@quotation
@smallformat
  java at.dms.dis.Main
@end smallformat
@end quotation

@sp1
The command line parameters are: 
@quotation
@smallformat
java at.dms.dis.Main [cdhisxV] (file.class | class)+
  --classpath, p _: Sets the classpath
  --destination, d _: Sets the destination directory
  --help, h: displays the help information
  --inter, i: Only displays the interfaces of classes [false]
  --sorted, s: Prints fields and methods sorted [false]
  --stack, x: Prints stack information [false]
  --stdout, c: Prints on the standard output [false]
  --verbose, v: Displays information while processing files [false]
  --version, V: prints out the version information
    class: a class (fully qualified name) accessible from the current classpath
@end smallformat
@end quotation

@c  CHAPTER 1 : section Kopi Classfile API
@node Kopi Classfile API, , Kopi Assembly Language, (Chapter 1)
@section Kopi Classfile API
@footnote {License type : Kopi Classfile is distributed under the terms of the GNU Lesser General Public License. (@xref{Appendix 1}.)}

@sp1
This package contains the API to edit classfiles from within a
Java program. If you want to read or write classfiles in a human
readable form, you should use @acronym{KSM} and @acronym{DIS} which
offer an interface to classfile.

@sp1
Basically, this package contains three parts: one to read data from
a file, one to create a consistant class from another program, and a
third part to check the code of each function (compute stack and local
variable usage, and optionnally optimize code) and then dump the class
into a file.

@c  CHAPTER 1 : section Kopi Classfile API : subsection Read a classfile
@node Read a classfile, Create edit optimize and check a classfile, , (Kopi Classfile API)
@subsection Read a classfile

@sp1
You just have to create a ClassInfo from a file:

@example
ClassInfo clazz = new ClassInfo(new
RandomAccessFile(``AClass.class''), false);
@end example

or with its full name and a class path using the provided class ClassPath:

@example
  ClassPath path = new ClassPath(``.''); 
  ClassInfo clazz = path.getClassFile(``pack.AClass'', true);
  // rmq: the last parameter allows you 
  //      to load only the interface (skip code)
@end example

Once you've read your class, you can access all the information you need
from the provided API such as getName(), getSuperClass(), getMethods(),
getSourceFile(). If you have loaded an entire class (not only the
interface), you'll be able to change some information (the source file,
the name, some modifiers...) and then to dump it to file again.
    
@c  CHAPTER 1 : section Kopi Classfile API : subsection Create, edit, optimize and check a classfile
@node Create edit optimize and check a classfile, Write a classfile, Read a classfile, (Kopi Classfile API)
@subsection Create, edit, optimize and check a classfile

@c  CHAPTER 1 : section Kopi Classfile API : subsection Create, edit, optimize and check a classfile
@c  subsubsection Create a class from scratch
@subsubsection Create a class from scratch
@sp1
You can create a class from scratch and then add all the attributes and
members you want. See @acronym{KSM} or @acronym{KJC} for a real example
of usage.

@c  CHAPTER 1 : section Kopi Classfile API : subsection Create, edit, optimize and check a classfile
@c  subsubsection Edit a class
@subsubsection Edit a class
@sp1
You can edit your class using the provided API:

@example
ClassInfo clazz = new ClassInfo(new File(``AClass.class''); 
clazz.setName(``BClass'');
@end example

@c  CHAPTER 1 : section Kopi Classfile API : subsection Create, edit, optimize and check a classfile
@c  subsubsection Optimize and check a classfile
@subsubsection Optimize and check a classfile
@sp1
After you have built or edited the instructions, you can check and optimize the code:

@example
// obtained from any non empty method
CodeInfo code = clazz.getMethods()[0]; 
// 2 is the number of optimization loop, 0 for none
code.optimizeAndCheck(2) 
@end example

The main check is to ensure that the stack depth is correct for every
branch in the program. We may add later some verifications made by the
Java Verifier at runtime.
    
@c  CHAPTER 1 : section Kopi Classfile API : subsection Write a classfile
@node Write a classfile, Pluggable Bytecode optimizer, Create edit optimize and check a classfile, (Kopi Classfile API)
@subsection Write a classfile

@c  CHAPTER 1 : section Kopi Classfile API : subsection Write a classfile
@c  subsubsection Write a .class file
@subsubsection Write a .class file
@sp1
After you have built or edited a ClassInfo, you can dump it into a file with:
@example
ClassInfo clazz = new ClassInfo(new File(``AClass.class''); 
clazz.setName(``BClass'')
clazz.write(new DataOutputStream(new FileOutputStream(``BClass.class'');
@end example

@c  CHAPTER 1 : section Kopi Classfile API : subsection Write a classfile
@c  subsubsection Example
@subsubsection Example
@sp1
This simple example sets all methods to be public in the class passed as
argv[0] and writes this new class in a file argv[1]
@example 
/** 
 * This simple example set all methods to 
 * be public in the class passed as first
 * parameters and write this new class in a file argv[1]
 */	    
import at.dms.classfile.*; 
import java.io.*;

public class Editor implements Constants @{ 
  public static void main(String[] argv) 
  throws at.dms.classfile.ClassFileFormatException, 
         java.io.FileNotFoundException, 
         java.io.IOException 
  @{ 
    DataInputStream is = new DataInputStream(new FileInputStream(argv[0]));
  
    ClassInfo clazz = new ClassInfo(is, false); 
    MethodInfo[] method = clazz.getMethods(); 
    
    for (int i = 0; i < method.length; i++) 
      method[i].setModifiers(toPublic(method[i].getModifiers())); 
    
    clazz.write(new DataOutputStream(new FileOutputStream(argv[1])));
  @} 
  private static short toPublic(short modifiers) @{ 
    return (short)((modifiers | ACC_PUBLIC) &
       ~(ACC_PROTECTED | ACC_PRIVATE));
  @} 
@}
@end example 

@c  CHAPTER 1 : section Kopi Classfile API : subsection Write a classfile
@c  subsubsection Where to use this package
@subsubsection Where to use this package
@sp1
This is a list of non restrictive possible tools to build with this package:

@itemize @bullet
@item
@sp1
Back end for compilers that generates code for the Java Virtual Machine
@sp1
There are two fully implemented examples that come with @acronym{Kopi} suite:

@itemize @minus
@item
@acronym{KSM} Kopi assembler
@sp1
This is a small example to show how a ``high
level'' assembly language is translated into Java bytecode. This example
is very small (10 classes) and is a good starting point for learning how
the classfile package works.  @acronym{KSM} is composed of a parser that
reads ``.ksm'' files and some subclasses of classfiles for handling
assembler labels and jumps. @acronym{KSM} syntax is easy because you
don't have to use the most optimized pseudo-instruction in your code,
you can use generic instruction that classfile will optimize afterwards.
@sp1
By example if you use ``push 1'' to push the
constant one into the stack, classfile will translate this instruction
to ``iconst_1'', which is smaller and faster. Another feature of
@acronym{KSM} is that you don't have to compute the amount of stack
used, or the number of local variables; the classfile package will do it
for you.

@item
@acronym{KJC} Kopi Java Compiler
@sp1
This is a big example (160 classes) that shows how
to use the classfile package as a back end for a compiler. Classfile was
first designed as a part of @acronym{KJC}, but because this package may
be used for other purposes, it has been separated from the
compiler. That makes the code easy to handle and improve.
@end itemize

@item
Optimizer for classfiles (obfuscators, code optimizers, ...).
@sp1
It is also very easy to create a classfile optimizer. We
will soon provide a minimalist code optimizer that can read every
classfile provided and generates optimized versions in the destination
directory. Our optimizer will be used only for testing purpose and won't
do anything more than:

@itemize @minus
@item
Unnecessary information removal (local vars, line numbers, source file attibutes).

@item
Bytecode optimization (equivalent to -O2 of @acronym{KJC}).
@end itemize

@sp1
But it would be very easy to transform it to a true
obfuscator/optimizer by collecting used fields and methods and renaming
every member of class to the smallest size possible.

@item
5.3 Disassemblers
@sp1
It is very easy to build a disassembler over Kopi
classfile by accessing every information in the classfile with the
provided API.  An example of such a disassembler, @acronym{DIS}, is
provided with the @acronym{Kopi} suite. It converts classfile in a
syntax that is understood by @acronym{KSM}.  That allows you to
disassemble a classfile, modify some code, and then regenerate the
classfiles. Our disassembler is very small also but powerful enough to
disassemble every classfiles into @acronym{KSM} syntax. And, if you want
to disassemble classfiles in another syntax, you just have to subclass
the AssemblerPrettyPrinter.

@item
Native recompilers to C
@sp1
From the classfile assembler, it is all the same to
generate Java byte code or C. The problem of such tools is to provide a
gc and a window toolkit. but it should not be to difficult to create a
tool that compiles natively command-line Java programs.

@item
Cross reference tool
@sp1
A useful tool based on the Kopi classfile may be a cross reference analyser.
@end itemize

@c  CHAPTER 1 : section Kopi Classfile API : subsection Pluggable Bytecode optimizer
@node Pluggable Bytecode optimizer, Jump and peephole optimization, Write a classfile, (Kopi Classfile API)
@subsection Pluggable Bytecode optimizer

@sp1
This chapter explains which optimisations are provided by
the bytecode optimizer.  These optimizations are:

@itemize @bullet
@item
Unreachable code elimination.
@item
Jump and peephole optimizations.
@end itemize
@c </HIGHLIGHTS>
      
@c  CHAPTER 1 : section Kopi Classfile API : subsection Pluggable Bytecode optimizer
@c  subsubsection The Kopi Optimizer
@subsubsection The Kopi Optimizer
@footnote {License type : optimize is distributed under the terms of the GNU PUBLIC License. (@xref{Appendix 2}.)}

@sp1
This tool allows you to optimize a classfile or a complete directory
using the optimizer engine of kjc on already generated classfiles. This
tool exists mainly for testing purpose.
@sp1
To launch optimize from the command line, type:

@quotation
@smallformat
  java at.dms.optimize.Main
@end smallformat
@end quotation

@sp1
The command line parameters are: 

@quotation
@smallformat
  java at.dms.optimize.Main (file.class | directory)+
    --help, h: displays the help information
    --level, l _: Level of optimization [2]
    --verbose, v: Displays information while processing files [false]
    --version, V: prints out the version information
      class: a class (fully qualified name) accessible from the current classpath
@end smallformat
@end quotation

@c  CHAPTER 1 : section Kopi Classfile API : subsection Pluggable Bytecode optimizer
@c  subsubsection Unreachable code optimization
@subsubsection Unreachable code optimization

@sp1
Unreachable code is simply removed from the CodeInfo. And
@command{instructions} are removed if they are not targeted in a method.

@c  CHAPTER 1 : section Kopi Classfile API : subsection Pluggable Bytecode optimizer
@c  subsubsection Jump and peephole optimization
@node Jump and peephole optimization, , Pluggable Bytecode optimizer, (Kopi Classfile API)
@subsection Jump and peephole optimization
@sp1
This is the current list of peephole optimization performed by @acronym{KJC}:

@itemize @bullet
@item
Jumps to the following instruction.
@example
goto		L1
L1:	...	
=>
...
@end example
	  
@item
Jumps to next instruction.
@example
...
ifeq		L1
L1:	...	
=>
...
pop[2]
...
@end example

@item
Jump to unconditional jumps.
@example
...
opc_goto	L1
...
L1:	goto		L2	
=>
...
goto		L2
...
L1:	goto		L2	
@end example

@item
Goto to return instruction.
@example
...
goto		L1
...
L1:	ireturn	
=>
...
ireturn
...
ireturn	
@end example

@item
Peephole optimizations.
@example
iconst_0
ifeq		L1
...
L1:	...	
=>
...
L1:	...	
@end example

or

@example
iconst_[0, 1, null]
if_icmpeq		L1
...
L1:	...	
=>
ifeq			L1
...
L1:	...	
@end example
@end itemize

@c ************************************************************
@c
@c                      Chapter 2
@c
@c ************************************************************

@c CHAPTER 2
@node Chapter 2, Chapter 3, Chapter 1, (Top)
@chapter The @acronym{Kopi} Java Compiler
@c  <TITLEABBREV>@acronym{KJC}</TITLEABBREV>
@footnote {License type : KJC is distributed under the terms of the GNU General Public License. (@xref{Appendix 2}.)}

@sp1
@acronym{KJC} is the first compiler written entirely in Java and
available under the terms of the GNU Public License. It allows you to
extend features at any level from syntax to code generation (By example
by adding support for generic type). It is very easy to add features and
to maintain this compiler, and we hope that a large comunity of Java
developers will help us bring it to a level of efficiency comparable to
others commercial compilers.

  @sp1
One of the major advantage of a Java compiler written in Java is
that it can be called from an other Java program and that then the
output can be executed via dynamic loading. This compilation is executed
without overhead and is then quite fast. Thus, you can use @acronym{KJC}
to dynamically recompile portions of your program to a fully optimized
version for a target only known at runtime. And this without breaking
the "Write Once, Run Anywhere" benefit of Java.

  
@c CHAPTER 2 : section KJC, another Java compiler
@node @acronym{KJC} another Java compiler, Usage, , (Chapter 2)
@section @acronym{KJC}, another Java compiler

@sp1
@acronym{KJC} is not the first freely available Java compiler but
it provides some new features not previously available. These features
are:

@itemize @bullet
@item
a GNU compiler and thus can be integrated in GNU projects;
@item
great extensibility;
@item
auditing that helps you to maintain your code;
@item
an optimizing compiler.
@end itemize

@sp1
 Since @acronym{KJC} is a GNU a project, it is easy to improve by sending
us patches or suggestions. Since it is maintained by a small team of
engineers, the development cycle of new releases is far shorter than the
JavaC one.
 
@c CHAPTER 2 : section KJC, another Java compiler : subsection Comparison with other compilers
@node Comparison with other compilers, @acronym{KJC} advantages, , (@acronym{KJC} another Java compiler)
@subsection Comparison with other compilers

@sp1

There are mainly two other compilers for Java freely available:
Javac and jikes.  Javac is error-proof and has a role of reference, and
jikes is extremly fast. This table shows the differences between these
two compilers and @acronym{KJC}:

@multitable @columnfractions .25 .25 .25 .25
@item Feature @tab Javac @tab Jikes @tab @acronym{KJC}
@item License model
@tab @uref{http://java.sun.com/communitysource, Community Source Code}
@tab @uref{http://www10.software.ibm.com/developerworks/opensource/license10.html, Jikes Public license}
@tab @uref{http://www.gnu.org/copyleft, GNU Public License}
@item Language
@tab Java
@tab C++
@tab Java
@item Supported platform
@tab All platforms with a Java VM
@tab Almost all
@tab All platforms with a Java VM
@item Speed
@tab Slow
@tab Very fast
@tab -
@item Extendability
@tab Poor
@tab Poor
@tab Good
@item Generated code
@tab Good with -O
@tab No optimizations
@tab -
@item Auditing
@tab No
@tab Poor with -warning
@tab Still at an early level
@end multitable
 
@c CHAPTER 2 : section KJC, another Java compiler : subsection KJC advantages
@node @acronym{KJC} advantages, , Comparison with other compilers, (@acronym{KJC} another Java compiler)
@subsection @acronym{KJC} advantages

@c CHAPTER 2 : section KJC, another Java compiler : subsection KJC advantages
@c subsubsection Free software
@subsubsection Free software

@sp1
@acronym{KJC} is distributed under the term of a GNU public
license and thus can be integrated freely in any other GNU project. The
source code is part of the standard distribution and will help you
understand the behavior of the program.  It will also allow you to
extend it.


@c CHAPTER 2 : section KJC, another Java compiler : subsection KJC advantages
@c subsubsection Extensible
@subsubsection Extensible

@sp1
This Java compiler written in Java is easily extensible. We
have developed a lot of tools over @acronym{KJC} like @acronym{XKJC} and
@acronym{VKJC}. These tools generates classfiles without any knowledge
of the underlying Java bytecode convention (Stack size, verifier
convention, ...).

@c CHAPTER 2 : section KJC, another Java compiler : subsection KJC advantages
@c subsubsection Auditing features
@subsubsection Auditing features

@sp1 
An auditing tool helps you follow the Java code convention and
avoid common errors that can be easily detected by a compiler. We have
started to extend @acronym{KJC} with warnings to enforce the respect of
this convention. This part of @acronym{KJC} is still in an early
development stage, but will be our main focus for the next release
(1.4).  See: <XREF LINKEND="REF-ELEMENT">

@c CHAPTER 2 : section KJC, another Java compiler : subsection KJC advantages
@c subsubsection Beautifier
@subsubsection Beautifier

@sp1
@acronym{KJC} can read a .Java file and rewrite it following the Java
Code Conventions. This can be useful when you get some source files from
someone else and want to convert them into something readable. It is
also useful for tools extending @acronym{KJC} to generate 100% pure Java
code.

@c CHAPTER 2 : section KJC, another Java compiler : subsection KJC advantages
@c subsubsection Optimizer
@subsubsection Optimizer

@sp1
The code generation is based on at.dms.classfile and
at.dms.optimizer. This last package is focused on bytecode optimization
and will be improved in the next release. It already supports multi-pass
optimizations, dead code removal and peephole optimization.

  
@c CHAPTER 2 : section Usage
@node Usage, @acronym{KJC} Diagnostic Messages, @acronym{KJC} another Java compiler, (Chapter 2)
@section Usage

@sp1
Once you have added kjc.zip in your @command{CLASSPATH} you can launch
@acronym{KJC} by typing the following command at the prompt:
@quotation
@smallformat  
%java at.dms.kjc.Main
@end smallformat  
@end quotation
    
@c CHAPTER 2 : section Usage : subsection Command line options
@subsection Command line options

@sp1 
The command line options currently supported by @acronym{KJC} are
(@acronym{KJC} --help):

@example
--beautify, -b: Beautifies the source code [false]
--classpath, -C[String]: Changes class path to classpath
--debug, -g: Produces debug information (does nothing yet) [false]
--deprecation, -D: Tests for deprecated members [false]
--destination, -d[String]: Writes files to destination
--filter, -f[String]: Warning filter [at.dms.kjc.DefaultFilter]
--help, h: Displays the help information
--java, -j: Generates java source code instead of class [false]
--lang, -l[String]: Sets the source language (1.1, 1.2, kopi) [1.1]
--multi, -m: Compiles in multi threads mode [false]
--nowrite, -n: Only checks files, doesn't generate code [false]
--optimize, -O[int]: Optimizes X times [1]
--proc, -p[int]: Maximal number of threads to use [2]
--verbose, -v: Prints out information during compilation [false]
--version, V: Prints out the version information
--warning, -w[int]: Maximal level of warnings to be displayed [0]
@end example

@c CHAPTER 2 : section KJC Diagnostic Messages
@node @acronym{KJC} Diagnostic Messages, Road map, Usage, (Chapter 2)
@section @acronym{KJC} Diagnostic Messages

@sp1 
This new feature of @acronym{KJC} helps to enforce Java coding
standard and to avoid most common bugs by providing useful warnings
about your code. This warnings are referenced at the end of this
documentation and are fully configurable.

@sp1 
This is our first step in this direction and we are looking forward
to add new checks as they come from contributors. So feel free to send
us remarks and suggestions about this new feature in order to help us to
build a powerful tool.

@c CHAPTER 2 : section KJC Diagnostic Messages : subsection Coding standard
@node Coding standard, Configuration, , (@acronym{KJC} Diagnostic Messages)
@subsection Coding standard

@sp1 
The rules come from the JLS, Sun's "Java Coding Convention", and
several other sources and are based on our experience.

@c CHAPTER 2 : section KJC Diagnostic Messages : subsection Configuration
@node Configuration, , Coding standard, (@acronym{KJC} Diagnostic Messages)
@subsection Configuration

@sp1 
May be the best way to use the diagnostic messages of KJC is to
turn ON all warnings and maintain the source code free of them. But you
may not agree with our coding convention and you have then the
possibility to define a warning filter for your own needs. If you want
to use KJC on an existing program that doesn't follow our coding
convention (or worse the one from Sun) you will receive tons of warnings
and it won't be helpful at all. In this case you can set the minimal
warning level with the -w switch to only check your code against worst
common failures.

@sp1 
In the next release we may add a -Wxxx option to select a warning
subset.

@c CHAPTER 2 : section KJC Diagnostic Messages : subsection Configuration
@c subsubsection Warning level
@subsubsection Warning level

@sp1
	  There are five levels of warning:
@itemize @bullet
@item
Caution
@sp1
This portion of code is surely wrong but accepted by the language.
@sp1 
It may be something like: ((String)null).toString();
@item
Warning 1
@sp1
This portion of code is correct but can lead to a more global failure.
@sp1
For instance because a variable is declared but never used or a
variable is assigned to itself.
@item
Warning 2
@sp1 
This portion of code is syntaxically dirty or potentially dangerous.
@sp1 
Like a then statement without brace or missing default label in switches.
@item
Warning 3
@sp1 
All other warnings.
@sp1 
Everything that enforce our coding standard.
@item
Notice
@sp1
Other information about the code that are not specifically focused
on error search but rather on code beauty.
@sp1
Like unordered modifiers, usage of package/protected fields or
usage of package import instead of class import.
@end itemize

@sp1 
One can select the level of warning to be displayed with the -w
switch. The default value is 0 and --warning without parameter sets it
to 3.

@c CHAPTER 2 : section KJC Diagnostic Messages : subsection Configuration
@c subsubsection Warning filter
@subsubsection Warning filter

@sp1 
One can write his personal warning filter by calling kjc with the
switch --filter XXX where XXX is the name of a class which extends
at.dms.compiler.WarningFilter and is accessible on the CLASSPATH. An
example of such a filter is the default filter for KJC:

@example
public class DefaultFilter implements at.dms.compiler.WarningFilter @{

  // ----------------------------------------------------------------------
  // FILTER
  // ----------------------------------------------------------------------

  /**
   * Filters a warning
   * @@param	warning		a warning to be filtred
   * @@return	FLT_REJECT, FLT_FORCE, FLT_ACCEPT
   */
  public int filter(CWarning warning) @{
    if (warning.getDescription().equals(KjcMessages.UNUSED_PARAMETER)
	|| warning.getDescription().equals(KjcMessages.CONSTANT_VARIABLE_NOT_FINAL)
	|| warning.getDescription().equals(KjcMessages.UNUSED_CATCH_PARAMETER)) @{
      return FLT_REJECT;
    @} else @{
      return FLT_ACCEPT;
    @}
  @}
@}
@end example

@sp1
For each warning, this method select whether it should be:

@itemize @bullet
@item
FLT_FORCE
@sp1
Displayed in every case.
@item
FLT_REJECT
@sp1
Hidden in every case.
@item
FLT_ACCEPT
@sp1
Displayed if the level is lower than the minimal
warning limit and not filtered by the default filter of KJC.
@end itemize            

@sp1
The list of warnings is available at the end of this documentation
in the reference section<XREF LINKEND="REF-ELEMENT">.

@c CHAPTER 2 : section Road map
@node Road map, , @acronym{KJC} Diagnostic Messages, (Chapter 2)
@section Road map

@sp1
The next release (1.5) will have the following features:

@itemize @bullet
@item
Optimizations: All the old optimizations developed at DMS will be
included in the next release as well as the ones that were provided to
us via patches or suggestion from our early @acronym{KJC} users.
@item
Full support of the new features of JDK1.2.
@end itemize            



@c ************************************************************
@c
@c                      Chapter 3
@c
@c ************************************************************

@c CHAPTER 3
@node Chapter 3, Chapter 4, Chapter 2, (Top)
@chapter @acronym{XKJC} eXtended kopi Java compiler
@footnote{License type : XKJC is distributed under the terms of the GNU General Public License. (@xref{Appendix 2}.)}

@sp1
Java with embedded @acronym{SQL}

@sp1
Our company developes database application written in our own
specificatin language (that may be after distributed with a GPL
licence). This language allows developer to define triggers and actions
in the @acronym{XKJC} language that is a superset of Java with embedded
@acronym{SQL}. @acronym{XKJC} allows the mixing of Java-typed expression
from both @acronym{SQL} and Java.

@sp1    
Since @acronym{SQL} statements are parsed, it allows one to write a
very clear code as compared to JDBC (see @acronym{XKJC} vs JDBC
section).  It allows one to make requests with embedded Java expressions
computed at runtime. It comes with a support for BLOB and Java
serialisation mechanism, allowing to store Java objects in any JDBC
database and to retrieve them both nicely and efficiently.

@sp1    
As in @acronym{SQL} all types have a NULL value, the distinction
between primitive types and Object types of the Java language are
problematic. To handle this, @acronym{XKJC} contains an operator
overloading capability that allows the mixing of primitive types with
objects.

@sp1        
The mechanism of overloading looks like the one provided by C++
compiler except that only expression operator are overidable (+, -, *,
/, %, ==, !=, &, |, << >>, >>>, ^, ~, ++, --) and the cast
operation. There is no implicit conversion, and that make it easy to
understand.

@sp1        
There is an example of a typical @acronym{XKJC} program:

@example
#cursor(int id) @{ 
  SELECT Vector Obj 
  FROM   BLOBS 
  WHERE  ID = :id 
@} typed; 
typed.open(6); 
if (typed.next()) 
  for (int i = 0; i < typed.Obj.size(); i++) 
    System.out.println("vect(" + i + "): " + typed.Obj.elementAt(i)); 
typed.close(); 
@end example
  
@c CHAPTER 3 : section Java language extensions
@node Java language extensions, , , (Chapter 3)
@section Java language extensions

@c CHAPTER 3 : section Java language extensions : subsection Syntactic extensions
@node Syntactic extensions, Operator overloading, , (Java language extensions)
@subsection Syntactic extensions

@itemize @bullet
@item Unnamed parameters
@sp1
@acronym{KJC} allow you to unspecify names of parameters in method
definition if they are not used:

@example
void foo(int);
// a non used paramter name would have generated a warning
@end example

@item Assert/Fail mechanism
@sp1
A mechanism of assertion is very useful for debugging and testing a
program but slighty inefficient for a final release. @acronym{KJC}
provide a simple mechanisme of assertion that is removed when -O option
is checked.
	      
@itemize @minus
@item assert
@sp1
we introduce a new method #assert that checks a condition is verified:

@example
void foo(int i) @{
  #assert(i>0); // or #assert(i>0, ``a message'');
@} 
can be translated in Java as:
void foo(int i) @{
  if (!i>0)
    throw new new RuntimeException(); 
@}
@end example

@item fail

@sp1
we introduce a new method #fail that correspond to a check(false) expression:

@example
void foo(int i) @{
  if (i > 0) 
    A(); 
  else
    #fail(``Bad value''); // or #fail();
@}
@end example

can be translated in Java as:

@example
void foo(int i) @{
  if (i > 0) 
    A(); 
  else 
    throw new RuntimeException(``Bad value''); 
@} 
@end example
@end itemize
@end itemize
    
@c CHAPTER 3 : section Java language extensions : subsection Operator overloading
@node Operator overloading, Embedded @acronym{SQL}, Syntactic extensions, (Java language extensions)
@subsection Operator overloading

@sp1
not yet documented, but you can take a look in the oper folder of
@acronym{XKJC} sources.
    
@c CHAPTER 3 : section Java language extensions : subsection Embedded SQL
@node Embedded @acronym{SQL}, Future improvements, Operator overloading, (Java language extensions)
@subsection Embedded @acronym{SQL}

@sp1
By providing an easy way to include @acronym{SQL} statement inside
your Java code (not between double quote), @acronym{XKJC} made it more
easy to read and maintain. With explicit typing the compiler check that
expression are correct and involve the overloading mechanism to execute
expression such as:

@c CHAPTER 3 : section Java language extensions : subsection Embedded SQL
@c subsubsection Connections
@subsubsection Connections

@sp1
By providing explicit connection to @acronym{SQL} statement you are
able to work on more than one database at the same time. But since
common applications work with only one database, we provide a mechanism
of implicit transaction that allows to save time by wrinting:
	  
@example
#execute@{SELECT COUNT(*) FROM Cars INTO count@};
@end example
	  
instead of:
	  
@example
#execute[Main.getDatabase().getFreeConnection()] @{
  SELECT COUNT(*) FROM Cars INTO count
@};
@end example

@c CHAPTER 3 : section Java language extensions : subsection Embedded SQL
@c subsubsection Cursors
@subsubsection Cursors

@sp1
The cursor are the common way to get more than one row of data from
the database. It's like ResultSet but it's typed:

@c CHAPTER 3 : section Java language extensions : subsection Embedded SQL
@c subsubsection SQL SELECT INTO Statement
@subsubsection @acronym{SQL} SELECT INTO Statement

@sp1
The only @acronym{SQL} statement in @acronym{XKJC} is the #execute that
allow to fetch data from the database with a ``SELECT INTO''.
	  
Examples:
@example
@enumerate
@item
#execute @{
  SELECT String name, Image image, BigDecimal speed 
  FROM   Cars
  WHERE  ID = 1 
  INTO   theName, theImage, theSpeed
@};
	    
@item
#execute @{
  SELECT String name 
  FROM   Cars 
  WHERE  ID =:id 
  INTO   names[id]
@};
   
@item
#execute[conn] @{
  SELECT COUNT(*) 
  FROM Cars 
  INTO count
@};
@end enumerate
@end example

@sp1	  
The last example use an explicit connection while the others use an
implicit connection (ie, the context should inherit from
DBContextHandler and its default connection will be used).

@c CHAPTER 3 : section Java language extensions : subsection Embedded SQL
@c subsubsection SQL Expressions
@subsubsection @acronym{SQL} Expressions

@sp1
@acronym{SQL} expression returns an int value that correspond to
the number of row modified by the expression. An expression can use a
cursor to identifie a row of the database (WHERE CURRENT OF) with fully
implemented JDBC drivers.
	  
Examples:  
@example
@enumerate
@item
#update @{
  UPDATE Cars 
  WHERE  ID =:id 
  SET    name = :(javaName + '-' + id)
@};    

@item
#update(cursor) @{
  UPDATE Cars 
  SET    name = :(javaName + '-' + id)
@};
	    
@item
#update [conn] @{ 
  DELETE FROM Cars 
  WHERE :id > 10
@};
@end enumerate
@end example

@sp1  
The last example use an explicit connection while the others
use an implicit connection (ie, the context should inherit from
DBContextHandler and its default connection will be used).
      
@c CHAPTER 3 : section Java language extensions : subsection Embedded SQL
@c subsubsection Transactions
@subsubsection Transactions

@sp1
Every @acronym{SQL} statements should be executed within
transaction. This allows to reexcute statements interupted by deadlock
(after asking the user if he wants to) or abort a whole transaction if
something is wrong (like if a Java exception is thrown). The syntax is:
	  
@example
#protected([``an optional message''])@{
  ... 
  ... // a list of Java and @acronym{SQL} statements
  ...
@};
@end example

@sp1  
If an exception is thrown during execution of this block, the current
transaction is aborted, else it commited. A way to handle deadlock is
provided.

    
@c CHAPTER 3 : section Java language extensions : subsection Future improvements
@node Future improvements, , Embedded @acronym{SQL}, (Java language extensions)
@subsection Future improvements

@sp1 
The main thing that is missing here is a program that checks the
definition of database types provided by the programmer against the
database.  This could be realized with the metadata subsystem of JDBC,
but this is for a future version. There is also no way to create table
or meta data in the database, since @acronym{XKJC} is intended only to
DML @acronym{SQL} (Data Manipulation Language).



@c ************************************************************
@c
@c                      Chapter 4
@c
@c ************************************************************

@c CHAPTER 4
@node Chapter 4, Chapter 5, Chapter 3, (Top)
@chapter Visual Kopi

@sp1
Visual Kopi...


@c ************************************************************
@c
@c                      Chapter 5
@c
@c ************************************************************

@c CHAPTER 5
@node Chapter 5, Chapter 6, Chapter 4, (Top)
@chapter Other tools
@footnote{License type : Optgen is distributed under the terms of the GNU General Public License.}

@sp1
Other tools developed for the Kopi project...

@c CHAPTER 5 : section Compiler tools
@node Compiler tools, Other tools, , (Chapter 5)
@section Compiler tools

@c CHAPTER 5 : section Compiler tools : subsection Option generator
@node Option generator, Message generator, , (Compiler tools)
@subsection Option generator
@footnote{License type :  Optgen is distributed under the terms of the GNU General Public License. (@xref{Appendix 2}.)}

@sp1 
To launch Optgen from the command line, type 

@quotation
@smallformat
java at.dms.optgen.Main
@end smallformat
@end quotation


@sp1
The command line parameters are: 

@quotation
@smallformat
java at.dms.optgen.Main file.opt+
  no options
@end smallformat
@end quotation

@sp1
The goal of this tool is to generate a command line option controller (based on gnu.getopt) from a description file.

@c CHAPTER 5 : section Compiler tools : subsection Message generator
@node Message generator, Lexer generator, Option generator, (Compiler tools)
@subsection Message generator
@footnote{License type : Mesgen is distributed under the terms of the GNU General Public License. (@xref{Appendix 2}.)}

@sp1 
To launch Msggen from the command line, type 

@quotation
@smallformat
java at.dms.msggen.Main
@end smallformat
@end quotation

@sp1
The command line parameters are: 

@quotation
@smallformat
java at.dms.msggen.Main file.msg+
  no options
@end smallformat
@end quotation

@sp1
The goal of this tool is to generate a class with messages from a description files.

@c CHAPTER 5 : section Compiler tools : subsection Lexer generator
@node Lexer generator, Memory counter, Message generator, (Compiler tools)
@subsection Lexer generator
@footnote{License type : Lexgen is distributed under the terms of the GNU General Public License. (@xref{Appendix 2}.)}

@sp1 
To launch Lexgen from the command line, type 

@quotation
@smallformat
java at.dms.lexgen.Main
@end smallformat
@end quotation

@sp1
The command line parameters are: 

@quotation
@smallformat
java at.dms.lexgen.Main file.t+
  no options
@end smallformat
@end quotation

@sp1
The goal of this tool is to generate a perfect hashtable function and corresponding tokens for a specified list of keywords.

@c CHAPTER 5 : section Compiler tools : subsection Memory counter
@node Memory counter, Macro KJC, Lexer generator, (Compiler tools)
@subsection Memory counter
@footnote{License type : Memcnt is distributed under the terms of the GNU Lesser General Public License.(@xref{Appendix 1}.)}

@sp1 
To launch Memcnt from the command line, type 

@quotation
@smallformat
java at.dms.memcnt.Main
@end smallformat
@end quotation

@sp1
The command line parameters are: 

@quotation
@smallformat
java at.dms.mamcnt.Main classfile
  --help, h: displays the help information
  --verbose, v: Displays information while processing files [false]
  --version, V: prints out the version information
@end smallformat
@end quotation

@sp1
The goal of this tool is to instrument a classfile to count every new objects created during runtime.

@c CHAPTER 5 : section Compiler tools : subsection Macro KJC
@node Macro KJC, , Memory counter, (Compiler tools)
@subsection Macro KJC
@footnote{License type : MKJC is distributed under the terms of the GNU General Public License. (@xref{Appendix 2}.)}

@sp1 
To launch MKJC from the command line, type 

@quotation
@smallformat
java at.dms.mkjc.Main
@end smallformat
@end quotation

@sp1
The command line parameters are: 

@quotation
@smallformat
java at.dms.mkjc.Main file.macro
  --beautify, -b: Beautifies the source code [false]
  --classpath, -C[String]: Changes class path to classpath
  --debug, -g: Produces debug information (does nothing yet) [false]
  --deprecation, -D: Tests for deprecated members [false]
  --destination, -d[String]: Writes files to destination
  --filter, -f[String]: Warning filter [at.dms.kjc.DefaultFilter]
  --help, h: displays the help information
  --java, -j: Generates java source code instead of class [false]
  --lang, -l[String]: Sets the source language (1.1, 1.2, kopi) [1.1]
  --multi, -m: Compiles in multi threads mode [false]
  --nowrite, -n: Only checks files, doesn't generate code [false]
  --optimize, -O[int]: Optimizes X times [1]
  --proc, -p[int]: Maximal number of threads to use [2]
  --verbose, -v: Prints out information during compilation [false]
  --version, V: prints out the version information
  --warning, -w[int]: Maximal level of warnings to be displayed [0]
@end smallformat
@end quotation

@sp1
The goal of this tool is to generate AST from a comprehensive java-like syntax.


@c CHAPTER 5 : section Other tools
@node Other tools, , Compiler tools, (Chapter 5)
@section Other tools

@c CHAPTER 5 : section Other tools : subsection Lpr
@node Lpr ,Mailer, , (Other tools)
@subsection Lpr
@footnote{License type : Lpr is distributed under the terms of the GNU Lesser General Public License. (@xref{Appendix 1}.)}

@sp1 
To launch lpr from the command line, type 

@quotation
@smallformat
java at.dms.lpr.LpR
java at.dms.lpr.LpQ
java at.dms.lpr.LpRm
@end smallformat
@end quotation

@sp1
The command line parameters are: 

@quotation
@smallformat
java at.dms.lpr.LpR file+
  --bindSourcePort, -B: Binds the source port [false]
  --copies, -#[int]: Sets the number of copies to print [1]
  --dataFirst, -D: Sends data first (for old NT lpd servers) [false]
  --filetype, -f[String]: Sets the file type
  --help, h: displays the help information
  --indent, -i[int]: Sets the indent size [-1]
  --job, -J[String]: Sets the job identifier
  --localHost, -L[String]: Sets the local host [localhost]
  --mail, -m: Mails when job is done [false]
  --noBurst, -H: Suppresses the burst page [false]
  --printClass, -C[String]: Sets the print class
  --printHost, -H[String]: Sets the print hosts [localhost]
  --proxyHost, -X[String]: Sets the proxy host to use (UNIX)
  --queue, -P[String]: Sets the queue to work on
  --remotePort, -d[int]: Sets the remote port [-1]
  --remove, -r: Removes the file when printing is done [false]
  --sourcePort, -s[int]: Sets the source port [-1]
  --timeout, -t[int]: Sets the timeout value in millisc [60000]
  --title, -T[String]: Sets the title for the job
  --tmpdir, -t[String]: Sets the tmp dir to use [/tmp/]
  --user, -u[String]: Sets the user who invoked the command
  --version, V: prints out the version information
  --width, -w[int]: Sets the page width [-1]
  --windows, -W: Uses a windows style protocol to communicate with the server [false]

java at.dms.lpr.LpRm file+
  --bindSourcePort, -B: Binds the source port [false]
  --help, h: displays the help information
  --localHost, -L[String]: Sets the local host [localhost]
  --longFormat, -l: Displays more informations about jobs [false]
  --mine, -m: Shows only the jobs of the current user [false]
  --printHost, -H[String]: Sets the print hosts [localhost]
  --proxyHost, -X[String]: Sets the proxy host to use (UNIX)
  --queue, -P[String]: Sets the queue to work on
  --remotePort, -d[int]: Sets the remote port [-1]
  --sourcePort, -s[int]: Sets the source port [-1]
  --timeout, -t[int]: Sets the timeout value in millisc [60000]
  --user, -u[String]: Sets the user who invoked the command
  --version, V: prints out the version information

java at.dms.lpr.LpQ
  --bindSourcePort, -B: Binds the source port [false]
  --help, h: displays the help information
  --localHost, -L[String]: Sets the local host [localhost]
  --longFormat, -l: Displays more informations about jobs [false]
  --mine, -m: Shows only the jobs of the current user [false]
  --printHost, -H[String]: Sets the print hosts [localhost]
  --proxyHost, -X[String]: Sets the proxy host to use (UNIX)
  --queue, -P[String]: Sets the queue to work on
  --remotePort, -d[int]: Sets the remote port [-1]
  --sourcePort, -s[int]: Sets the source port [-1]
  --timeout, -t[int]: Sets the timeout value in millisc [60000]
  --user, -u[String]: Sets the user who invoked the command
  --version, V: prints out the version information
@end smallformat
@end quotation

@sp1
The goal of this tool is to print on a lpd queue from java.

@c CHAPTER 5 : section Other tools : subsection Mailer
@node Mailer, Sqlc, Lpr, (Other tools)
@subsection Mailer
@footnote{License type : Mailer is distributed under the terms of the GNU Lesser General Public License. (@xref{Appendix 1}.)}

@sp1 
To launch mailer from the command line, type 

@quotation
@smallformat
java at.dms.mailer.Mailer mailhost recipient subject text sender [aFileToAttach aName]
@end smallformat
@end quotation

@sp1
The goal of this tool is to send a mail with a possible attachement (uuencoded).

@c CHAPTER 5 : section Other tools : subsection Sqlc
@subsection Sqlc
@node Sqlc, Dbi, Mailer, (Other tools)
@footnote{License type : Sqlc is distributed under the terms of the GNU General Public License. (@xref{Appendix 2}.)}

@sp1 
To launch sqlc from the command line, type 

@quotation
@smallformat
java at.dms.sqlc.Main sqlfile
@end smallformat
@end quotation

@sp1
The command line parameters are: 

@quotation
@smallformat
java at.dms.sqlc.Main sqlfile
  --help, h: displays the help information
  --version, V: prints out the version information
  --warning, w: Displays warning for misleading sql constructions [false]
@end smallformat
@end quotation

@sp1
The goal of this tool is to parse and verify sql statements.

@c CHAPTER 5 : section Other tools : subsection Dbi
@node Dbi, , Sqlc, (Other tools)
@subsection Dbi
@footnote{License type : Dbi is distributed under the terms of the GNU General Public License. (@xref{Appendix 2}.)}

@sp1
To launch sqlc from the command line, type 

@quotation
@smallformat
  java at.dms.dbi.Main sqlfile
@end smallformat
@end quotation

@sp1
The command line parameters are: 

@quotation
@smallformat
java at.dms.dbi.Main sqlfile
  --beautify, -b: Prints the source code (beautifier) [false]
  --commit, -c[String]: add a transDB to the data dict.
  --destination, -d[String]: the location to generate the database interface
  --driver, -D[String]: Sets the driver to use for DB access
  --help, h: displays the help information
  --interfaceGen, -i[String]: Sets the package name of Database.k
  --login, -l[String]: Sets thename of the user for login
  --passwd, -p[String]: Sets the passwd to login
  --simulate, -t: Runs the script but abort it [false]
  --stdin, -e: Reads from standard input [false]
  --stdout, -s: Prints on standard output [false]
  --syntax, -S[String]: Sets the syntax to use for output (jdbc | tbx) [jdbc]
  --url, -u[String]: Sets the url of the database
  --version, V: prints out the version information
  --warning, w: Displays warning for misleading sql constructions [false]
@end smallformat
@end quotation

@sp1
The goal of this tool is to parse and verify sql statements and to generate a data dictionary. It also allows one to convert JDBC-SQL to other SQL syntax (transbase).
 

@c ************************************************************
@c
@c                      Chapter 6
@c
@c ************************************************************

@c CHAPTER 6
@node Chapter 6, Chapter 7, Chapter 5, (Top)
@chapter Warning Reference


@node ENCLOSE_IF_ELSE_IN_BLOCK, ENCLOSE_IF_THEN_IN_BLOCK, , (Chapter 6)
@section ENCLOSE_IF_ELSE_IN_BLOCK - TBR
@enumerate
@item Message
@sp1
warning(2): Else part of if-statement should be enclosed in block statement (JCC)
@item Description
@sp1
TBR.
@item Motivation
@sp1
TBR.
@item Example
@example
if (aCond) @{
  aStatement();
@} else
  aStatement();
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node ENCLOSE_IF_THEN_IN_BLOCK, ENCLOSE_LOOP_BODY_IN_BLOCK, ENCLOSE_IF_ELSE_IN_BLOCK, (Chapter 6)
@section ENCLOSE_IF_THEN_IN_BLOCK - TBR
@enumerate
@item Message
@sp1
warning(2): Then part of if-statement should be enclosed in block statement (JCC).
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
if (aCond)
  aStatement();
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node ENCLOSE_LOOP_BODY_IN_BLOCK, FIELD_RENAME_SUPER, ENCLOSE_IF_THEN_IN_BLOCK, (Chapter 6)
@section ENCLOSE_LOOP_BODY_IN_BLOCK - TBR
@enumerate
@item Message
@sp1
warning(2): Loop body should be enclosed in block statement (JCC).
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
while (aCond)
  aStatement();
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node FIELD_RENAME_SUPER, METHOD_UNCHECKED_EXCEPTION, ENCLOSE_LOOP_BODY_IN_BLOCK, (Chapter 6)
@section FIELD_RENAME_SUPER - TBR
@enumerate
@item Message
@sp1
warning(1): Field aField is already declared in a super class and is visible here (kopi).
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
class A @{
  protected aField;
@}
class B extends A @{
  protected aField;
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node METHOD_UNCHECKED_EXCEPTION, METHOD_UNTHROWN_EXCEPTION, FIELD_RENAME_SUPER, (Chapter 6)
@section METHOD_UNCHECKED_EXCEPTION - TBR
@enumerate
@item Message
@sp1
warning(1): Declared exception aQualifiedException is an unchecked exception (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
void aMethod() throws java.lang.RuntimeException @{

@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node METHOD_UNTHROWN_EXCEPTION, OLD_STYLE_ARRAY_BOUNDS, METHOD_UNCHECKED_EXCEPTION, (Chapter 6)
@section METHOD_UNTHROWN_EXCEPTION - TBR
@enumerate
@item Message
@sp1
warning(1): Declared exception aQualifiedException is never thrown (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
void aMethod() throws java.io.IOException @{
  // nothing
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node OLD_STYLE_ARRAY_BOUNDS, REPLACE_PACKAGE_IMPORT, METHOD_UNTHROWN_EXCEPTION, (Chapter 6)
@section OLD_STYLE_ARRAY_BOUNDS - TBR
@enumerate
@item Message
@sp1
warning(2): Old_style array bound declaration (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
int	aField[];
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node REPLACE_PACKAGE_IMPORT, SELF_ASSIGNMENT, OLD_STYLE_ARRAY_BOUNDS, (Chapter 6)
@section REPLACE_PACKAGE_IMPORT - TBR
@enumerate
@item Message
@sp1
notice: Consider replacing package import aQualifiedPackageImport by import of class(es) aListOfClassesImport (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
import java.io.*;
// but only java.io.File is used in this compilation unit
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node SELF_ASSIGNMENT, STRAY_COMMA, REPLACE_PACKAGE_IMPORT, (Chapter 6)
@section SELF_ASSIGNMENT - TBR
@enumerate
@item Message
@sp1
warning(1): Assignment of an expression to itself (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
Constructor(int aParan) @{
  // The parameter is missspelled.
  this.aParam = aParam;
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node STRAY_COMMA, STRAY_SEMICOLON, SELF_ASSIGNMENT, (Chapter 6)
@section STRAY_COMMA - TBR
@enumerate
@item Message
@sp1
warning(2): Stray comma (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
new int[] @{1, 2, @}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node STRAY_SEMICOLON, UNNECESSARY_CAST, STRAY_COMMA, (Chapter 6)
@section STRAY_SEMICOLON - TBR
@enumerate
@item Message
@sp1
warning(3): Stray semicolon (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
void aMethod() @{

@};
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node UNNECESSARY_CAST, UNNECESSARY_INSTANCEOF, STRAY_SEMICOLON, (Chapter 6)
@section UNNECESSARY_CAST - TBR
@enumerate
@item Message
@sp1
warning(2): The type aType does not need to be casted in aSupertype (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
Object o = (Object)Integer.valueOf("1");
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node UNNECESSARY_INSTANCEOF, INSTANCE_PREFIXES_STATIC_METHOD, UNNECESSARY_CAST, (Chapter 6)
@section UNNECESSARY_INSTANCEOF - TBR
@enumerate
@item Message
@sp1
warning(1): The instanceof evaluation is not necessary (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
if (Integer.valueOf("1") instanceof Integer) @{

@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node INSTANCE_PREFIXES_STATIC_METHOD, INSTANCE_PREFIXES_STATIC_FIELD, UNNECESSARY_INSTANCEOF, (Chapter 6)
section INSTANCE_PREFIXES_STATIC_METHOD - TBR
@enumerate
@item Message
@sp1
warning(2): Avoid using an instance to access a class (static) method; use a class name instead (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
class A @{
  static int i() @{return 1;@};
  static int aMethod(A a) @{
    return a.i();
  @}
@} 
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node INSTANCE_PREFIXES_STATIC_FIELD, UNUSED_CATCH_PARAMETER, INSTANCE_PREFIXES_STATIC_METHOD, (Chapter 6)
@section INSTANCE_PREFIXES_STATIC_FIELD - TBR
@enumerate
@item Message
@sp1
warning(2): Avoid using an instance to access a class (static) field; use a class name instead (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
class A @{
  static i;
  static aMethod(A a) @{
    a.i = 0;
  @}
@} 
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node UNUSED_CATCH_PARAMETER, UNUSED_CLASS_IMPORT, INSTANCE_PREFIXES_STATIC_FIELD, (Chapter 6)
@section UNUSED_CATCH_PARAMETER - TBR
@enumerate
@item Message
@sp1
warning(3): The catch parameter aCatchParameter is not used (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
try @{
// ...
@} catch (Exception e) @{

@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node UNUSED_CLASS_IMPORT, UNUSED_LOCALVAR, UNUSED_CATCH_PARAMETER, (Chapter 6)
@section UNUSED_CLASS_IMPORT - TBR
@enumerate
@item Message
@sp1
warning3: The imported class aClass is not used (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
import java.io.File;
// but not anymore used
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node UNUSED_LOCALVAR, UNUSED_PACKAGE_IMPORT, UNUSED_CLASS_IMPORT, (Chapter 6)
@section UNUSED_LOCALVAR - TBR
@enumerate
@item Message
@sp1
warning(1): The local variable aVariable is not used (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
@{
  int count;
  // not used anymore
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node UNUSED_PACKAGE_IMPORT, UNUSED_PARAMETER, UNUSED_LOCALVAR, (Chapter 6)
@section UNUSED_PACKAGE_IMPORT - TBR
@enumerate
@item Message
@sp1
warning(1): The imported package \"@{0@}\" is not used (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
import java.lang.*;
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node UNUSED_PARAMETER, UNUSED_PRIVATE_FIELD, UNUSED_PACKAGE_IMPORT, (Chapter 6)
@section UNUSED_PARAMETER - TBR
@enumerate
@item Message
@sp1
warning(3): The parameter aParameter is not used (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
void aMethod(int aParameter) @{
  // aParameter is not used anymore
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node UNUSED_PRIVATE_FIELD, UNUSED_PRIVATE_METHOD, UNUSED_PARAMETER, (Chapter 6)
@section UNUSED_PRIVATE_FIELD - TBR
@enumerate
@item Message
@sp1
warning(1): The private field aField is not used (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
private int notUsedAnymore;
@end example
@item Status
@sp1
Implemented.
@end enumerate


@node UNUSED_PRIVATE_METHOD, IMPORT_JAVA_LANG, UNUSED_PRIVATE_FIELD, (Chapter 6)
@section UNUSED_PRIVATE_METHOD - TBR
@enumerate
@item Message
@sp1
warning(1): The private method aMethod is not used (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
private int notUsed() @{@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node IMPORT_JAVA_LANG, IMPORT_CURRENT_PACKAGE, UNUSED_PRIVATE_METHOD, (Chapter 6)
@section IMPORT_JAVA_LANG - TBR
@enumerate
@item Message
@sp1
warning(2): On-Demand-Import of package java.lang is not necessary (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
import java.lang.Integer;
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node IMPORT_CURRENT_PACKAGE, UNECESSARY_MODIFIERS, IMPORT_JAVA_LANG, (Chapter 6)
@section IMPORT_CURRENT_PACKAGE - TBR
@enumerate
@item Message
@sp1
warning(2): On-Demand-Import of current package is not necessary (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
import currentpackage.AClass;
@end example
@item Status
@sp1
Implemented.
@end enumerate


@node UNECESSARY_MODIFIERS, CASE_FALL_THROUGH, IMPORT_CURRENT_PACKAGE, (Chapter 6)
@section UNECESSARY_MODIFIERS - TBR
@enumerate
@item Message
@sp1
warning(1): The modifier aModifier is implicit and therefore does not need to be specified (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
interface AnInterface @{
  public final int i = 0;
@}
@end example
@item Status
@sp1
Not Implemented.
@end enumerate

@node CASE_FALL_THROUGH, SWITCH_NO_DEFAULT, UNECESSARY_MODIFIERS, (Chapter 6)
@section CASE_FALL_THROUGH - TBR
@enumerate
@item Message
@sp1
warning(2): Fall through is dangerous and should not be used (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
switch (x) @{
case a:
  aStatement();
case b:
  aSecondStatement()
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node SWITCH_NO_DEFAULT, EMPTY_CATCH_BLOCK, CASE_FALL_THROUGH, (Chapter 6)
@section SWITCH_NO_DEFAULT - TBR
@enumerate
@item Message
@sp1
warning(2): Every switch must have a default clause (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
switch (x) @{
case 1:
  //
case 2:
  //
@}
// default value usually means that there is an error. 
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node EMPTY_CATCH_BLOCK, PACKAGE_PROTECTED_ATTRIBUTE, SWITCH_NO_DEFAULT, (Chapter 6)
@section EMPTY_CATCH_BLOCK - TBR
@enumerate
@item Message
@sp1
warning(1): Catch block is empty (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
try @{
  aStatement();
@} catch (AnException ex) @{
  // Should do something about it.
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node PACKAGE_PROTECTED_ATTRIBUTE, MODIFIER_ORDER, EMPTY_CATCH_BLOCK, (Chapter 6)
@section PACKAGE_PROTECTED_ATTRIBUTE - TBR
@enumerate
@item Message
@sp1
warning(3): Field aField should be declared private or public (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
class AClass @{
  int i;
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node MODIFIER_ORDER, PACKAGE_IS_MISSING, PACKAGE_PROTECTED_ATTRIBUTE, (Chapter 6)
@section MODIFIER_ORDER - TBR
@enumerate
@item Message
@sp1
warning(2): The order of the modifiers does not follow the convention [aModifier] (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
final public static int i;
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node PACKAGE_IS_MISSING, ATTRIBUTE_LIST, MODIFIER_ORDER, (Chapter 6)
@section PACKAGE_IS_MISSING - TBR
@enumerate
@item Message
@sp1
notice: There is no package declaration for this compilation unit (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
// no package XXX
class AClass @{

@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node ATTRIBUTE_LIST, CONSTANT_VARIABLE_NOT_FINAL, PACKAGE_IS_MISSING, (Chapter 6)
@section ATTRIBUTE_LIST - TBR
@enumerate
@item Message
@sp1
warning(3): Attribute lists are hard to read and are preferably replaced by a list of attribute declaration (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
class AClass @{
  int a, b, c;
@}
@end example
@item Status
@sp1
Not Implemented.
@end enumerate

@node CONSTANT_VARIABLE_NOT_FINAL, ASSIGNMENT_IN_CONDITION, ATTRIBUTE_LIST, (Chapter 6)
@section CONSTANT_VARIABLE_NOT_FINAL - TBR
@enumerate
@item Message
@sp1
notice: This local variable is constant and should be declared final (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
       That allows the compiler to perform better optimizations.
	TBR.
@item Example
@example
int aMethod() @{
  int i =0;
  //
  return i;
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node ASSIGNMENT_IN_CONDITION, SUPER_METHOD_DIFFERS, CONSTANT_VARIABLE_NOT_FINAL, (Chapter 6)
@section ASSIGNMENT_IN_CONDITION - TBR
@enumerate
@item Message
@sp1
warning(2): Assignment operator may have been used in place of equality operator (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
if (b = true) @{
  aStatement();
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node SUPER_METHOD_DIFFERS, STRING_COMPARISON, ASSIGNMENT_IN_CONDITION, (Chapter 6)
@section SUPER_METHOD_DIFFERS - TBR
@enumerate
@item Message
@sp1
warning(2): A method with the same name but different parameters exists in super class (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
class AClass @{
  int aMethod() @{

  @}
@}
class ASecondClass extends AClass @{
  int aMethod(boolean b) @{
    // it does not override aMethod
  @}
@}
@end example
@item Status
@sp1
Not Implemented.
@end enumerate

@node STRING_COMPARISON, COMPARING_BOOLEAN_CONSTANT, SUPER_METHOD_DIFFERS, (Chapter 6)
@section STRING_COMPARISON - TBR
@enumerate
@item Message
@sp1
warning(1): Comparison of strings with '==' operator is surely wrong (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
boolean aMethod() @{
  return "1" == Integer.toString(1);
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node COMPARING_BOOLEAN_CONSTANT, ASSIGNS_LOOP_VARIABLE, STRING_COMPARISON, (Chapter 6)
@section COMPARING_BOOLEAN_CONSTANT - TBR
@enumerate
@item Message
@sp1
warning(2): Comparing boolean expression to constant values is not necessary (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
if (aCond() == true) @{

@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node ASSIGNS_LOOP_VARIABLE, UNINITIALIZED_FIELD, COMPARING_BOOLEAN_CONSTANT, (Chapter 6)
@section ASSIGNS_LOOP_VARIABLE - TBR
@enumerate
@item Message
@sp1
warning(2): Assignment of loop variable aVariable inside loop body (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
for (int i = 0; i < 10; i++) @{
  for (int j - 0; j < 10; i++) @{
    // do something but i is incremented twice
  @}
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node UNINITIALIZED_FIELD, FIELD_COULD_BE_FINAL, ASSIGNS_LOOP_VARIABLE, (Chapter 6)
@section UNINITIALIZED_FIELD - TBR
@enumerate
@item Message
@sp1
notice: Field aField may have not been explicitely initialized (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
class A @{
  private boolean aCondition;
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node FIELD_COULD_BE_FINAL, FIELD_COULD_BE_STATIC, UNINITIALIZED_FIELD, (Chapter 6)
@section FIELD_COULD_BE_FINAL - TBR
@enumerate
@item Message
@sp1
warning(2): Field aField is constant and could be declared final (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
class A @{
  // never reassigned
  private int aCondition = 1;
@}
@end example
@item Status
@sp1
Not implemented.
@end enumerate

@node FIELD_COULD_BE_STATIC, UNUSED_RETURN_VALUE_FROM_FUNCTION_CALL, FIELD_COULD_BE_FINAL, (Chapter 6)
@section FIELD_COULD_BE_STATIC - TBR
@enumerate
@item Message
@sp1
warning(2): Field aField could be declared static (kopi)
@item Description
@sp1
TBR.
@item Rationale
@sp1
TBR.
@item Example
@example
class A @{
  // never reassigned in instance methods
  private int aField = 1;
@}
@end example
@item Status
@sp1
Not implemented.
@end enumerate

@node UNUSED_RETURN_VALUE_FROM_FUNCTION_CALL, , FIELD_COULD_BE_STATIC, (Chapter 6)
@section UNUSED_RETURN_VALUE_FROM_FUNCTION_CALL - TBR
@enumerate
@item Message
@sp1
warning(2): The method aMethod returns a value that is never used (kopi) 
@item Description
@sp1
TBR.
        If you really want to call a function as a procedure, use the /*unused*/ comment tag:
@example
 class A @{
  boolean aMethod() @{...@}
  void anOtherMethod() @{
    /*unused*/aMethod();
    /*unused return parameter*/aMethod();
  @}
@}
@end example
@item Rationale
@sp1
TBR.
@item Example
@example
class A @{
  boolean aMethod() @{...@}
  void anOtherMethod() @{
    aMethod();
  @}
@}
@end example
@item Status
@sp1
Not implemented.
@end enumerate



@c ************************************************************
@c
@c                      Chapter 7
@c
@c ************************************************************

@c CHAPTER 7
@node Chapter 7, Chapter 8, Chapter 6, (Top)
@chapter Optimisations Reference

@node Jump to next instruction, Jump to goto instruction, , (Chapter 7)
@section Jump to next instruction - TBR

@enumerate
@item Description
@sp1
If a branch instruction jumps to the next instruction, it can be removed
or replaced by a pop instruction.

@sp1
These instructions will be replaced by a @i{pop2}

@itemize @bullet
@item @i{if_icmpeq}
@item @i{if_icmpne}
@item @i{if_icmplt}
@item @i{if_icmpgt}
@item @i{if_icmpge}
@item @i{if_icmple}
@end itemize

@sp1
These instructions will be replaced by a @i{pop}

@itemize @bullet
@item @i{ifeq}
@item @i{ifne}
@item @i{iflt}
@item @i{ifge}
@item @i{ifgt}
@item @i{ifle}
@item @i{if_acmpeq}
@item @i{if_acmpne}
@item @i{ifnull}
@item @i{ifnonnull}
@end itemize

@sp1
These instructions will be replaced by a @i{pop}

@itemize @bullet
@item @i{goto}
@end itemize
@sp1

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
    	        @@goto		_L1
    _L1:	@@return		
@}
===>
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
    	@@return		
@}

or

/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
                @@const		1
    	        @@ifne		_L1
    _L1:	@@return		
@}
===>
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
const		1
pop
    	@@return		
@}
@end example
@item Status

@sp1
Implemented.
@end enumerate

@node Jump to goto instruction, Goto to return instruction, Jump to next instruction, (Chapter 7)
@section Jump to goto instruction - TBR

@enumerate
@item Description
@sp1
If a branch instruction jumps to a @i{goto}, the target can be set to
the target of this @i{goto}.

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
           	@@goto		_L1
        _L1:	@@goto		_L2
	_L2:	@@return		
@}
===>
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@goto		_L2
        _L1:	@@goto		_L2
	_L2:	@@return		
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate

@node Goto to return instruction, @i{nop}, Jump to goto instruction, (Chapter 7)
@section Goto to return instruction - TBR

@enumerate
@item Description
@sp1
If a @i{goto} jumps to a @i{return}, it can be replaced by a @i{return}.

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@goto		_L1
	_L1:	@@return		
@}
===>
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@return
	_L1:	@@return		
@}
@end example
@item Status
@sp1
Implemented.
@end enumerate

@node @i{nop}, Comparison to 0, Goto to return instruction, (Chapter 7)
@section @i{nop} - TBR
@enumerate

@item Description
@sp1
@i{nop} can be removed in almost every case.
@sp1

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@nop
		@@return		
@}
===>
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
		@@return		
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate

@node Comparison to 0, Comparison to 1, @i{nop}, (Chapter 7)
@section Comparison to 0 - TBR

@enumerate
@item Description
@sp1
If a branch instruction follows a @i{push 0}, it can be removed or
replaced by a simpler instruction.

@sp1
These instructions will be replaced by a @i{icmp}:
@itemize @bullet
@item @i{if_icmpeq}
@item @i{if_icmpne}
@item @i{if_icmplt}
@item @i{if_icmpgt}
@item @i{if_icmpge}
@item @i{if_icmple}
@end itemize

@sp1
This instruction will be replaced by a @i{goto}:
@itemize @bullet
@item @i{ifeq}
@end itemize

@sp1
This instruction will be removed:
@itemize @bullet
@item @i{ifne}
@end itemize
@sp1

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@push		1
		@@push		0
		@@if_icmp	_L1
		@@goto		_L1
        _L1:	@@return		
@}
===>
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@push		1
		@@if_eq		_L1
		@@goto		_L1
        _L1:	@@return		
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate

@node Comparison to 1, Comparison to @i{null}, Comparison to 0, (Chapter 7)
@section Comparison to 1 - TBR

@enumerate
@item Description
@sp1
If a branch instruction follows a @i{push 1}, it can be removed or
replaced by a @i{goto}.

@sp1
This instruction will be replaced by a @i{goto}:
@itemize @bullet
@item @i{ifeq}
@end itemize

@sp1
This instruction will be removed:
@itemize @bullet
@item @i{ifne}
@end itemize
@sp1

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@push		1
		@@ifne		_L1
		@@goto		_L1
        _L1:	@@return		
@}
===>
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@goto		_L1
		@@goto		_L1
        _L1:	@@return		
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate

@node Comparison to @i{null}, @i{Push} and @i{pop}, Comparison to 1, (Chapter 7)
@section Comparison to @i{null} - TBR

@enumerate
@item Description
@sp1
If a branch instruction follows a @i{push null} it can be removed or
replaced by a @i{goto}.

@sp1
This instruction will be replaced by a @i{goto}:
@itemize @bullet
@item @i{if_null}
@end itemize

@sp1
This instruction will be removed:
@itemize @bullet
@item @i{if_nonnull}
@end itemize
@sp1

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@push		null
		@@if_nonnull	_L1
		@@goto		_L1
        _L1:	@@return		
@}
===>
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
		@@goto		_L1
        _L1:	@@return		
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate

@node @i{Push} and @i{pop}, Replace boolean branch, Comparison to @i{null}, (Chapter 7)
@section @i{Push} and @i{pop} - TBR

@enumerate
@item Description
@sp1
If a push is followed by a pop, both can be removed.

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@push		null
                @@pop
        	@@return		
@}
===>
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static void test() @{
        	@@return		
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate

@node Replace boolean branch, Jump over a @i{goto}, @i{Push} and @i{pop}, (Chapter 7)
@section Replace boolean branch - TBR

@enumerate
@item Description
@sp1
This special pattern is generated by naive compiler for boolean comparison.

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static int test() @{
		@@iload		2
		@@iload		1
		@@if_icmplt	_L1
		@@const		0
		@@goto		_L2
	_L1:	@@const		1
	_L2:	@@ifeq		_L3
		@@const		10
		@@goto		_L4
	_L3:	@@const		11
	_L4:	@@ireturn
@}
===>
/**
 * test
 *
 * @@stack   2
 * @@locals  3
 */
public static int test() @{
                @@iload          2
                @@iload          1
                @@if_icmpge      _L5
                @@const          10
                @@ireturn
        _L5:    @@const          11
                @@ireturn
@}

@end example

@item Status
@sp1
Implemented.
@end enumerate

@node Jump over a @i{goto}, Branch following a @i{ixor -1}, Replace boolean branch, (Chapter 7)
@section Jump over a @i{goto} - TBR

@enumerate
@item Description
@sp1
A jump over a @i{goto} can be replaced by its reverse code if targets
are identical.

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static int test() @{
		@@iload		1
		@@ifeq		_L1
        	@@goto		_L2
	_L1:	@@const		1
		@@ireturn		
	_L2:	@@const		2
		@@ireturn
@}
===>
/**
 * test
 *
 * @@stack   1
 * @@locals  2
 */
public static int test() @{
                @@iload          1
                @@ifne           _L4
                @@const          1
                @@ireturn
        _L4:    @@const          2
                @@ireturn
@}

@end example

@item Status
@sp1
Implemented.
@end enumerate

@node Branch following a @i{ixor -1}, Duplicate identical @i{push}, Jump over a @i{goto}, (Chapter 7)
@section Branch following a @i{ixor -1} - TBR

@enumerate
@item Description
@sp1
A branch following a @i{ixor -1} can be replaced by its reverse code.

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static int test() @{
		@@iload		1
		@@const		-1
        	@@ixor
		@@ifeq		_L1
		@@const		3
		@@ireturn
	_L1:	@@const		2
		@@ireturn
@}
===>
/**
 * test
 *
 * @@stack   1
 * @@locals  2
 */
public static int test() @{
                @@iload          1
                @@ifne           _L4
                @@const          3
                @@ireturn
        _L4:    @@const          2
                @@ireturn
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate

@node Duplicate identical @i{push}, Duplicate identical @i{getfield}, Branch following a @i{ixor -1}, (Chapter 7)
@section Duplicate identical @i{push}  - TBR

@enumerate
@item Description
@sp1
A duplicate @i{push} can be replaced by a @i{push} and a @i{dup}

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static int test() @{
		@@const		-1
		@@const		-1
		@@iadd
		@@ireturn
@}
===>
/**
 * test
 *
 * @@stack   2
 * @@locals  1
 */
public static int test() @{
                @@const          -1
                @@dup
                @@iadd
                @@ireturn
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate

@node Duplicate identical @i{getfield}, A @i{store} following @i{load}, Duplicate identical @i{push}, (Chapter 7)
@section Duplicate identical @i{getfield}  - TBR

@enumerate
@item Description
@sp1
A duplicate @i{getfield} can be replaced by a @i{getfield} and a @i{dup}

@item Program
@sp1
@example
static int i;

/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static int test() @{
		@@getstatic      int Test.i
		@@getstatic      int Test.i
		@@iadd
		@@ireturn
@}
===>
static int i;

/**
 * test
 *
 * @@stack   2
 * @@locals  1
 */
public static int test() @{
                @@getstatic      int Test.i
                @@dup
                @@iadd
                @@ireturn
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate

@node A @i{store} following @i{load}, , Duplicate identical @i{getfield}, (Chapter 7)
@section A @i{store} following @i{load} - TBR

@enumerate
@item Description
@sp1
A @i{store} following @i{load} can be replaced by a @i{dup}, @i{store}
sequence.
This allows the compiler to further optimize once the load is removed
(reduce liveness of the local variable)

@item Program
@sp1
@example
/**
 * test
 *
 * @@stack	0
 * @@locals	1
 */
public static int test() @{
		@@const		2
		@@istore		1
		@@iload		1
		@@ireturn
@}
===>
/**
 * test
 *
 * @@stack   2
 * @@locals  2
 */
public static int test() @{
                @@const          2
                @@dup
                @@istore         1
                @@ireturn
@}
@end example

@item Status
@sp1
Implemented.
@end enumerate



@c ************************************************************
@c
@c                      Chapter 8
@c
@c ************************************************************

@c CHAPTER 8
@node Chapter 8, Appendix, Chapter 7, (Top)
@chapter The implemantation of @acronym{KJC}


@c CHAPTER 8 : section Tools used by the Compiler
@node Tools used by the Compiler, Packages of the Compiler, , (Chapter 8)
@section Tools used by the Compiler

@sp1
The compiler uses several tools for automatic generation of
messages, tokens, lexer, parser and command-line processor. All these
tools are freely available under a GNU Public License or less
restrictive clone. All of these tools are included in the
distribution. There is first a set of tools necessary at build time:

@itemize @bullet

@item
@uref{http://www.antlr.org, ANTLR 2.6.1} 
@sp1 
ANTLR, ANother Tool
for Language Recognition, (formerly PCCTS) is a language tool that
provides a framework for constructing recognizers, compilers, and
translators from grammatical descriptions containing C++ or Java actions
	  
@item
AT.DMS.JPERF, A perfect hashcode generator

@sp1
Jperf is a minimal perfect hash function generator utility written
in Java and based on
@uref{http://www.cs.ucla.edu/~jkong/public/soft/GGPerf/README.html,
ggperf}
	  
@item
AT.DMS.LEXGEN, Token generator for handwritten lexer

@sp1
The goal of this tool is to generate a perfect hashtable function
and corresponding tokens for a specified list of keywords.
	  
@item
AT.DMS.OPTGEN, Option generator

@sp1
The goal of this tool is to generate a command line option
controller (based on gnu.getopt) from a description file.
	  
@item
AT.DMS.MSGGEN, Message generator

@sp1
The goal of this tool is to generate a class with messages from a
description file.
@end itemize
      
@sp1
There is a second set of libraries used at runtime. All these tools
are freely available under a GNU Library Public License or less
restrictive clone. These libraries are very small and included in the
distribution in binary format. Source format are available on the web or
from the credit page on our web server. There is two packages:

@itemize @bullet
@item
@uref{http://www.antlr.org, ANTLR 2.6.1}

@sp1
Only a very small subsest of the runtime library is used by
KJC. The whole AST part is removed from our runtime.
	  
@item
@uref{http://www.urbanophile.com/arenn/hacking/download.html, GNU.GETOPT}

@sp1
The GNU Java getopt classes support short and long argument parsing
in a manner 100% compatible with the version of GNU getopt in glibc
2.0.6 with a mostly compatible programmer's interface as well.
@end itemize
       
@sp1 
One other file was not originally developed by DMS, it is the
grammar of Java for ANTLR. This file is in the public domain and actualy
we are trying to keep our code as close as possible to the original.
    
@c CHAPTER 8 : section Packages of the Compiler
@node Packages of the Compiler, Passes of the Compiler, Tools used by the Compiler, (Chapter 8)
@section Packages of the Compiler

@sp1
The compiler is built on several packages as shown by the following
graphic: 
@c COCO : <graphic fileref="packages.eps" Align="center"></graphic>

@itemize @bullet
@item
at.dms.classfile

@sp1
This package allows one to edit classfiles and to check and
optimize instructions in an elegant way. This package is able to compute
the stack's depth and the number of local variables used by each method.
	  
@item
at.dms.util

@sp1 
This package contains utility classes used at runtime. This
includes basic definition of messages and options, Vector and Array
caches and convertion.
	  
@item
at.dms.compiler

@sp1
This package contains utility classes used specifically by the
compiler at runtime. This includes a more refined version of the
definition of messages, definition of error and warning classes,
definition of basic parser and lexer and utility methods.
	  
@item
at.dms.optimize

@sp1
This tool allows one to optimize a method. It performs dead code
elimination, some peephole optimizations and branch tensionning.
	  
@item
at.dms.backend [experimental]

@sp1
This tool allows one to optimize a method. It transforms the
(stack-based) JVM bytecode to an intermediate representation based on
quadruple and performs some powerful optimizations (CSE, dead code
elimination, copy propagation, register allocation). And it regenerates
java bytecode with a stack schleduling engine.
	  
@item
at.dms.kjc

@sp1
This package contains the Java compiler. The classes for the AST
(Abstract Syntax Tree) are prefixed with a J, the classes for the
definitions of members are prefixed with a C. This part is explained
more deeply in the next section.
	  
@item
at.dms.ksm

@sp1 
This tool allows one to generate java classfile from an assembler
definition. It is very useful in conjunction with DIS to modify some
classes.
	  
@item
at.dms.dis

@sp1
This tool allows one to see the code actually generated by the
compiler and may help one to optimize or understand a portion of the
code. This tool may also help one modify some classes from their
bytecode in conjunction with KSM(to regenerate them).

@end itemize      
    
@c CHAPTER 8 : section Passes of the Compiler
@node Passes of the Compiler, , Packages of the Compiler, (Chapter 8)
@section Passes of the Compiler

@sp1
The main class of the compiler is in `Main.java'. This file is
responsible for initialization, decoding arguments, opening and closing
files, and sequencing the passes.

@sp1 
The different passes are:

@itemize @bullet
@item
Parsing

@sp1
The parsing pass is invoked only once, to parse the entire
input. This pass reads the entire text of each compilation unit,
constructing syntax trees.  The tree representation does follow Java
syntax, except for TryCatchFinally statements that are splitted in two
different statements.

@item
Interface checking

@sp1
The second pass checks the interface. All exported types are
checked (a corresponding class definition should exist in either the
source files or in the classpath). A CMember object is associated to
every exported members, such object contains all the information
required at check time (access flags, types, values).

@item
Initializers checking

@sp1
This is a very small pass to compute exported constants before they
are used in body of methods.

@item
Code body checking

@sp1
The code of each method is checked. After a class is checked, the
parsing tree is destroyed and only method bodies are retained.

@item
Code generating

@sp1
The code of each classes is generated and for each method two more
passes of optimisations are available:

@itemize @minus
@item
Optimizations with at.dms.optimize

@sp1 
Peephole optimization and branch tensionning are performed.

@item
Optimizations with at.dms.backend

@sp1
More extensive optimizations are performed (dead code elimination,
register allocation).
@end itemize

@sp1
And then the code is dumped in files. Each time that a class code
is generated and dumped into a file, this class is freed from memory.
@end itemize



@c ************************************************************
@c
@c                      Appendix 1
@c
@c ************************************************************

@c Appendix
@node Appendix, , Chapter 8, (Top)
@unnumbered  Appendix

@node Appendix 1, Appendix 2, , (Appendix)
@appendixsection GNU Lesser General Public License

@sp1
@center GNU LESSER GENERAL PUBLIC LICENSE
@center Version 2.1, February 1999

@sp1
 Copyright (C) 1991, 1999 Free Software Foundation, Inc.
     59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

@sp1
[This is the first released version of the Lesser GPL.  It also counts
 as the successor of the GNU Library Public License, version 2, hence
 the version number 2.1.]

@sp1
@center Preamble

@sp1
  The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
Licenses are intended to guarantee your freedom to share and change
free software--to make sure the software is free for all its users.

@sp1
  This license, the Lesser General Public License, applies to some
specially designated software packages--typically libraries--of the
Free Software Foundation and other authors who decide to use it.  You
can use it too, but we suggest you first think carefully about whether
this license or the ordinary General Public License is the better
strategy to use in any particular case, based on the explanations below.

@sp1
  When we speak of free software, we are referring to freedom of use,
not price.  Our General Public Licenses are designed to make sure that
you have the freedom to distribute copies of free software (and charge
for this service if you wish); that you receive source code or can get
it if you want it; that you can change the software and use pieces of
it in new free programs; and that you are informed that you can do
these things.

@sp1
  To protect your rights, we need to make restrictions that forbid
distributors to deny you these rights or to ask you to surrender these
rights.  These restrictions translate to certain responsibilities for
you if you distribute copies of the library or if you modify it.

@sp1
  For example, if you distribute copies of the library, whether gratis
or for a fee, you must give the recipients all the rights that we gave
you.  You must make sure that they, too, receive or can get the source
code.  If you link other code with the library, you must provide
complete object files to the recipients, so that they can relink them
with the library after making changes to the library and recompiling
it.  And you must show them these terms so they know their rights.

@sp1
  We protect your rights with a two-step method: (1) we copyright the
library, and (2) we offer you this license, which gives you legal
permission to copy, distribute and/or modify the library.

@sp1
  To protect each distributor, we want to make it very clear that
there is no warranty for the free library.  Also, if the library is
modified by someone else and passed on, the recipients should know
that what they have is not the original version, so that the original
author's reputation will not be affected by problems that might be
introduced by others.

@sp1
  Finally, software patents pose a constant threat to the existence of
any free program.  We wish to make sure that a company cannot
effectively restrict the users of a free program by obtaining a
restrictive license from a patent holder.  Therefore, we insist that
any patent license obtained for a version of the library must be
consistent with the full freedom of use specified in this license.

@sp1
  Most GNU software, including some libraries, is covered by the
ordinary GNU General Public License.  This license, the GNU Lesser
General Public License, applies to certain designated libraries, and
is quite different from the ordinary General Public License.  We use
this license for certain libraries in order to permit linking those
libraries into non-free programs.

@sp1
  When a program is linked with a library, whether statically or using
a shared library, the combination of the two is legally speaking a
combined work, a derivative of the original library.  The ordinary
General Public License therefore permits such linking only if the
entire combination fits its criteria of freedom.  The Lesser General
Public License permits more lax criteria for linking other code with
the library.

@sp1
  We call this license the "Lesser" General Public License because it
does Less to protect the user's freedom than the ordinary General
Public License.  It also provides other free software developers Less
of an advantage over competing non-free programs.  These disadvantages
are the reason we use the ordinary General Public License for many
libraries.  However, the Lesser license provides advantages in certain
special circumstances.

@sp1
  For example, on rare occasions, there may be a special need to
encourage the widest possible use of a certain library, so that it becomes
a de-facto standard.  To achieve this, non-free programs must be
allowed to use the library.  A more frequent case is that a free
library does the same job as widely used non-free libraries.  In this
case, there is little to gain by limiting the free library to free
software only, so we use the Lesser General Public License.

@sp1
  In other cases, permission to use a particular library in non-free
programs enables a greater number of people to use a large body of
free software.  For example, permission to use the GNU C Library in
non-free programs enables many more people to use the whole GNU
operating system, as well as its variant, the GNU/Linux operating
system.

@sp1
  Although the Lesser General Public License is Less protective of the
users' freedom, it does ensure that the user of a program that is
linked with the Library has the freedom and the wherewithal to run
that program using a modified version of the Library.

@sp1
  The precise terms and conditions for copying, distribution and
modification follow.  Pay close attention to the difference between a
"work based on the library" and a "work that uses the library".  The
former contains code derived from the library, whereas the latter must
be combined with the library in order to run.

@sp1
@center GNU LESSER GENERAL PUBLIC LICENSE
@center TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION

@sp1
  0. This License Agreement applies to any software library or other
program which contains a notice placed by the copyright holder or
other authorized party saying it may be distributed under the terms of
this Lesser General Public License (also called "this License").
Each licensee is addressed as "you".

@sp1
  A "library" means a collection of software functions and/or data
prepared so as to be conveniently linked with application programs
(which use some of those functions and data) to form executables.

@sp1
  The "Library", below, refers to any such software library or work
which has been distributed under these terms.  A "work based on the
Library" means either the Library or any derivative work under
copyright law: that is to say, a work containing the Library or a
portion of it, either verbatim or with modifications and/or translated
straightforwardly into another language.  (Hereinafter, translation is
included without limitation in the term "modification".)

@sp1
  "Source code" for a work means the preferred form of the work for
making modifications to it.  For a library, complete source code means
all the source code for all modules it contains, plus any associated
interface definition files, plus the scripts used to control compilation
and installation of the library.

@sp1
  Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running a program using the Library is not restricted, and output from
such a program is covered only if its contents constitute a work based
on the Library (independent of the use of the Library in a tool for
writing it).  Whether that is true depends on what the Library does
and what the program that uses the Library does.
  
@sp1
  1. You may copy and distribute verbatim copies of the Library's
complete source code as you receive it, in any medium, provided that
you conspicuously and appropriately publish on each copy an
appropriate copyright notice and disclaimer of warranty; keep intact
all the notices that refer to this License and to the absence of any
warranty; and distribute a copy of this License along with the
Library.

@sp1
  You may charge a fee for the physical act of transferring a copy,
and you may at your option offer warranty protection in exchange for a
fee.

@sp1
  2. You may modify your copy or copies of the Library or any portion
of it, thus forming a work based on the Library, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:

@quotation
@sp1
    a) The modified work must itself be a software library.

@sp1
    b) You must cause the files modified to carry prominent notices
    stating that you changed the files and the date of any change.

@sp1
    c) You must cause the whole of the work to be licensed at no
    charge to all third parties under the terms of this License.

@sp1
    d) If a facility in the modified Library refers to a function or a
    table of data to be supplied by an application program that uses
    the facility, other than as an argument passed when the facility
    is invoked, then you must make a good faith effort to ensure that,
    in the event an application does not supply such function or
    table, the facility still operates, and performs whatever part of
    its purpose remains meaningful.

@sp1
    (For example, a function in a library to compute square roots has
    a purpose that is entirely well-defined independent of the
    application.  Therefore, Subsection 2d requires that any
    application-supplied function or table used by this function must
    be optional: if the application does not supply it, the square
    root function must still compute square roots.)
@end quotation

@sp1
  These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Library,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Library, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote
it.

@sp1
  Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Library.

@sp1
  In addition, mere aggregation of another work not based on the Library
with the Library (or with a work based on the Library) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.

@sp1
  3. You may opt to apply the terms of the ordinary GNU General Public
License instead of this License to a given copy of the Library.  To do
this, you must alter all the notices that refer to this License, so
that they refer to the ordinary GNU General Public License, version 2,
instead of to this License.  (If a newer version than version 2 of the
ordinary GNU General Public License has appeared, then you can specify
that version instead if you wish.)  Do not make any other change in
these notices.

@sp1
  Once this change is made in a given copy, it is irreversible for
that copy, so the ordinary GNU General Public License applies to all
subsequent copies and derivative works made from that copy.

@sp1
  This option is useful when you wish to copy part of the code of
the Library into a program that is not a library.

@sp1
  4. You may copy and distribute the Library (or a portion or
derivative of it, under Section 2) in object code or executable form
under the terms of Sections 1 and 2 above provided that you accompany
it with the complete corresponding machine-readable source code, which
must be distributed under the terms of Sections 1 and 2 above on a
medium customarily used for software interchange.

@sp1
  If distribution of object code is made by offering access to copy
from a designated place, then offering equivalent access to copy the
source code from the same place satisfies the requirement to
distribute the source code, even though third parties are not
compelled to copy the source along with the object code.

@sp1
  5. A program that contains no derivative of any portion of the
Library, but is designed to work with the Library by being compiled or
linked with it, is called a "work that uses the Library".  Such a
work, in isolation, is not a derivative work of the Library, and
therefore falls outside the scope of this License.

@sp1
  However, linking a "work that uses the Library" with the Library
creates an executable that is a derivative of the Library (because it
contains portions of the Library), rather than a "work that uses the
library".  The executable is therefore covered by this License.
Section 6 states terms for distribution of such executables.

@sp1
  When a "work that uses the Library" uses material from a header file
that is part of the Library, the object code for the work may be a
derivative work of the Library even though the source code is not.
Whether this is true is especially significant if the work can be
linked without the Library, or if the work is itself a library.  The
threshold for this to be true is not precisely defined by law.

@sp1
  If such an object file uses only numerical parameters, data
structure layouts and accessors, and small macros and small inline
functions (ten lines or less in length), then the use of the object
file is unrestricted, regardless of whether it is legally a derivative
work.  (Executables containing this object code plus portions of the
Library will still fall under Section 6.)

@sp1
  Otherwise, if the work is a derivative of the Library, you may
distribute the object code for the work under the terms of Section 6.
Any executables containing that work also fall under Section 6,
whether or not they are linked directly with the Library itself.

@sp1
  6. As an exception to the Sections above, you may also combine or
link a "work that uses the Library" with the Library to produce a
work containing portions of the Library, and distribute that work
under terms of your choice, provided that the terms permit
modification of the work for the customer's own use and reverse
engineering for debugging such modifications.

@sp1
  You must give prominent notice with each copy of the work that the
Library is used in it and that the Library and its use are covered by
this License.  You must supply a copy of this License.  If the work
during execution displays copyright notices, you must include the
copyright notice for the Library among them, as well as a reference
directing the user to the copy of this License.  Also, you must do one
of these things:

@quotation
@sp1
    a) Accompany the work with the complete corresponding
    machine-readable source code for the Library including whatever
    changes were used in the work (which must be distributed under
    Sections 1 and 2 above); and, if the work is an executable linked
    with the Library, with the complete machine-readable "work that
    uses the Library", as object code and/or source code, so that the
    user can modify the Library and then relink to produce a modified
    executable containing the modified Library.  (It is understood
    that the user who changes the contents of definitions files in the
    Library will not necessarily be able to recompile the application
    to use the modified definitions.)

@sp1
    b) Use a suitable shared library mechanism for linking with the
    Library.  A suitable mechanism is one that (1) uses at run time a
    copy of the library already present on the user's computer system,
    rather than copying library functions into the executable, and (2)
    will operate properly with a modified version of the library, if
    the user installs one, as long as the modified version is
    interface-compatible with the version that the work was made with.

@sp1
    c) Accompany the work with a written offer, valid for at
    least three years, to give the same user the materials
    specified in Subsection 6a, above, for a charge no more
    than the cost of performing this distribution.

@sp1
    d) If distribution of the work is made by offering access to copy
    from a designated place, offer equivalent access to copy the above
    specified materials from the same place.

@sp1
    e) Verify that the user has already received a copy of these
    materials or that you have already sent this user a copy.
@end quotation

@sp1
  For an executable, the required form of the "work that uses the
Library" must include any data and utility programs needed for
reproducing the executable from it.  However, as a special exception,
the materials to be distributed need not include anything that is
normally distributed (in either source or binary form) with the major
components (compiler, kernel, and so on) of the operating system on
which the executable runs, unless that component itself accompanies
the executable.

@sp1
  It may happen that this requirement contradicts the license
restrictions of other proprietary libraries that do not normally
accompany the operating system.  Such a contradiction means you cannot
use both them and the Library together in an executable that you
distribute.

@sp1
  7. You may place library facilities that are a work based on the
Library side-by-side in a single library together with other library
facilities not covered by this License, and distribute such a combined
library, provided that the separate distribution of the work based on
the Library and of the other library facilities is otherwise
permitted, and provided that you do these two things:

@sp1
    a) Accompany the combined library with a copy of the same work
    based on the Library, uncombined with any other library
    facilities.  This must be distributed under the terms of the
    Sections above.

@sp1
    b) Give prominent notice with the combined library of the fact
    that part of it is a work based on the Library, and explaining
    where to find the accompanying uncombined form of the same work.

@sp1
  8. You may not copy, modify, sublicense, link with, or distribute
the Library except as expressly provided under this License.  Any
attempt otherwise to copy, modify, sublicense, link with, or
distribute the Library is void, and will automatically terminate your
rights under this License.  However, parties who have received copies,
or rights, from you under this License will not have their licenses
terminated so long as such parties remain in full compliance.

@sp1
  9. You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Library or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Library (or any work based on the
Library), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Library or works based on it.

@sp1
  10. Each time you redistribute the Library (or any work based on the
Library), the recipient automatically receives a license from the
original licensor to copy, distribute, link with or modify the Library
subject to these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein.
You are not responsible for enforcing compliance by third parties with
this License.

@sp1
  11. If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Library at all.  For example, if a patent
license would not permit royalty-free redistribution of the Library by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Library.

@sp1
  If any portion of this section is held invalid or unenforceable under any
particular circumstance, the balance of the section is intended to apply,
and the section as a whole is intended to apply in other circumstances.

@sp1
  It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.

@sp1
  This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.

@sp1
  12. If the distribution and/or use of the Library is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Library under this License may add
an explicit geographical distribution limitation excluding those countries,
so that distribution is permitted only in or among countries not thus
excluded.  In such case, this License incorporates the limitation as if
written in the body of this License.

@sp1
  13. The Free Software Foundation may publish revised and/or new
versions of the Lesser General Public License from time to time.
Such new versions will be similar in spirit to the present version,
but may differ in detail to address new problems or concerns.

@sp1
Each version is given a distinguishing version number.  If the Library
specifies a version number of this License which applies to it and
"any later version", you have the option of following the terms and
conditions either of that version or of any later version published by
the Free Software Foundation.  If the Library does not specify a
license version number, you may choose any version ever published by
the Free Software Foundation.

@sp1
  14. If you wish to incorporate parts of the Library into other free
programs whose distribution conditions are incompatible with these,
write to the author to ask for permission.  For software which is
copyrighted by the Free Software Foundation, write to the Free
Software Foundation; we sometimes make exceptions for this.  Our
decision will be guided by the two goals of preserving the free status
of all derivatives of our free software and of promoting the sharing
and reuse of software generally.

@sp1
@center NO WARRANTY

@sp1
  15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
OTHER PARTIES PROVIDE THE LIBRARY "AS IS" WITHOUT WARRANTY OF ANY
KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

@sp1
  16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
DAMAGES.

@sp1
@center END OF TERMS AND CONDITIONS


@c ************************************************************
@c
@c                      Appendix 2
@c
@c ************************************************************

@c Appendix 1
c @node Appendix 2, , Appendix 1, (Appendix)
@appendixsection GNU General Public License

@sp1
@center GNU GENERAL PUBLIC LICENSE
@center Version 2, June 1991

@sp1
 Copyright (C) 1989, 1991 Free Software Foundation, Inc.
                       59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

@sp1
@center Preamble

@sp1
  The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
License is intended to guarantee your freedom to share and change free
software--to make sure the software is free for all its users.  This
General Public License applies to most of the Free Software
Foundation's software and to any other program whose authors commit to
using it.  (Some other Free Software Foundation software is covered by
the GNU Library General Public License instead.)  You can apply it to
your programs, too.

@sp1
  When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
this service if you wish), that you receive source code or can get it
if you want it, that you can change the software or use pieces of it
in new free programs; and that you know you can do these things.

@sp1
  To protect your rights, we need to make restrictions that forbid
anyone to deny you these rights or to ask you to surrender the rights.
These restrictions translate to certain responsibilities for you if you
distribute copies of the software, or if you modify it.

@sp1
  For example, if you distribute copies of such a program, whether
gratis or for a fee, you must give the recipients all the rights that
you have.  You must make sure that they, too, receive or can get the
source code.  And you must show them these terms so they know their
rights.

@sp1
  We protect your rights with two steps: (1) copyright the software, and
(2) offer you this license which gives you legal permission to copy,
distribute and/or modify the software.

@sp1
  Also, for each author's protection and ours, we want to make certain
that everyone understands that there is no warranty for this free
software.  If the software is modified by someone else and passed on, we
want its recipients to know that what they have is not the original, so
that any problems introduced by others will not reflect on the original
authors' reputations.

@sp1
  Finally, any free program is threatened constantly by software
patents.  We wish to avoid the danger that redistributors of a free
program will individually obtain patent licenses, in effect making the
program proprietary.  To prevent this, we have made it clear that any
patent must be licensed for everyone's free use or not licensed at all.

@sp1
  The precise terms and conditions for copying, distribution and
modification follow.

@sp1
@center GNU GENERAL PUBLIC LICENSE
@center TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION

@sp1
  0. This License applies to any program or other work which contains
a notice placed by the copyright holder saying it may be distributed
under the terms of this General Public License.  The "Program", below,
refers to any such program or work, and a "work based on the Program"
means either the Program or any derivative work under copyright law:
that is to say, a work containing the Program or a portion of it,
either verbatim or with modifications and/or translated into another
language.  (Hereinafter, translation is included without limitation in
the term "modification".)  Each licensee is addressed as "you".

@sp1
  Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running the Program is not restricted, and the output from the Program
is covered only if its contents constitute a work based on the
Program (independent of having been made by running the Program).
Whether that is true depends on what the Program does.

@sp1
  1. You may copy and distribute verbatim copies of the Program's
source code as you receive it, in any medium, provided that you
conspicuously and appropriately publish on each copy an appropriate
copyright notice and disclaimer of warranty; keep intact all the
notices that refer to this License and to the absence of any warranty;
and give any other recipients of the Program a copy of this License
along with the Program.

@sp1
  You may charge a fee for the physical act of transferring a copy, and
you may at your option offer warranty protection in exchange for a fee.

@sp1
  2. You may modify your copy or copies of the Program or any portion
of it, thus forming a work based on the Program, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:

@quotation
@sp1
    a) You must cause the modified files to carry prominent notices
    stating that you changed the files and the date of any change.

@sp1
    b) You must cause any work that you distribute or publish, that in
    whole or in part contains or is derived from the Program or any
    part thereof, to be licensed as a whole at no charge to all third
    parties under the terms of this License.

@sp1
    c) If the modified program normally reads commands interactively
    when run, you must cause it, when started running for such
    interactive use in the most ordinary way, to print or display an
    announcement including an appropriate copyright notice and a
    notice that there is no warranty (or else, saying that you provide
    a warranty) and that users may redistribute the program under
    these conditions, and telling the user how to view a copy of this
    License.  (Exception: if the Program itself is interactive but
    does not normally print such an announcement, your work based on
    the Program is not required to print an announcement.)
@end quotation

@sp1
  These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Program,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Program, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote it.

@sp1
  Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Program.

@sp1
  In addition, mere aggregation of another work not based on the Program
with the Program (or with a work based on the Program) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.

@sp1
  3. You may copy and distribute the Program (or a work based on it,
under Section 2) in object code or executable form under the terms of
Sections 1 and 2 above provided that you also do one of the following:

@quotation
@sp1
    a) Accompany it with the complete corresponding machine-readable
    source code, which must be distributed under the terms of Sections
    1 and 2 above on a medium customarily used for software interchange; or,

@sp1
    b) Accompany it with a written offer, valid for at least three
    years, to give any third party, for a charge no more than your
    cost of physically performing source distribution, a complete
    machine-readable copy of the corresponding source code, to be
    distributed under the terms of Sections 1 and 2 above on a medium
    customarily used for software interchange; or,

@sp1
    c) Accompany it with the information you received as to the offer
    to distribute corresponding source code.  (This alternative is
    allowed only for noncommercial distribution and only if you
    received the program in object code or executable form with such
    an offer, in accord with Subsection b above.)
@end quotation

@sp1
  The source code for a work means the preferred form of the work for
making modifications to it.  For an executable work, complete source
code means all the source code for all modules it contains, plus any
associated interface definition files, plus the scripts used to
control compilation and installation of the executable.  However, as a
special exception, the source code distributed need not include
anything that is normally distributed (in either source or binary
form) with the major components (compiler, kernel, and so on) of the
operating system on which the executable runs, unless that component
itself accompanies the executable.

@sp1
  If distribution of executable or object code is made by offering
access to copy from a designated place, then offering equivalent
access to copy the source code from the same place counts as
distribution of the source code, even though third parties are not
compelled to copy the source along with the object code.

@sp1
  4. You may not copy, modify, sublicense, or distribute the Program
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense or distribute the Program is
void, and will automatically terminate your rights under this License.
However, parties who have received copies, or rights, from you under
this License will not have their licenses terminated so long as such
parties remain in full compliance.

@sp1
  5. You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Program or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Program (or any work based on the
Program), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Program or works based on it.

@sp1
  6. Each time you redistribute the Program (or any work based on the
Program), the recipient automatically receives a license from the
original licensor to copy, distribute or modify the Program subject to
these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein.
You are not responsible for enforcing compliance by third parties to
this License.

@sp1
  7. If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Program at all.  For example, if a patent
license would not permit royalty-free redistribution of the Program by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Program.

@sp1
  If any portion of this section is held invalid or unenforceable under
any particular circumstance, the balance of the section is intended to
apply and the section as a whole is intended to apply in other
circumstances.

@sp1
  It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system, which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.

@sp1
  This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.

@sp1
  8. If the distribution and/or use of the Program is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Program under this License
may add an explicit geographical distribution limitation excluding
those countries, so that distribution is permitted only in or among
countries not thus excluded.  In such case, this License incorporates
the limitation as if written in the body of this License.

@sp1
  9. The Free Software Foundation may publish revised and/or new versions
of the General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

Each version is given a distinguishing version number.  If the Program
specifies a version number of this License which applies to it and "any
later version", you have the option of following the terms and conditions
either of that version or of any later version published by the Free
Software Foundation.  If the Program does not specify a version number of
this License, you may choose any version ever published by the Free Software
Foundation.

@sp1
  10. If you wish to incorporate parts of the Program into other free
programs whose distribution conditions are different, write to the author
to ask for permission.  For software which is copyrighted by the Free
Software Foundation, write to the Free Software Foundation; we sometimes
make exceptions for this.  Our decision will be guided by the two goals
of preserving the free status of all derivatives of our free software and
of promoting the sharing and reuse of software generally.

@sp1
@center NO WARRANTY

@sp1
  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
REPAIR OR CORRECTION.

@sp1
  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.

@sp1
@center END OF TERMS AND CONDITIONS

@bye 
